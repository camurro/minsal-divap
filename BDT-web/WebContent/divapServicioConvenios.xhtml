<?xml version="1.0" encoding="UTF-8"?>
<ui:composition xmlns="http://www.w3.org/1999/xhtml" xmlns:ui="http://java.sun.com/jsf/facelets" xmlns:f="http://java.sun.com/jsf/core"
	xmlns:h="http://java.sun.com/jsf/html" xmlns:p="http://primefaces.org/ui" template="/WEB-INF/templates/default.xhtml">
	
	<ui:define name="zonaJavaScript">
		<script type="text/javascript">
			function downloadDocument(idDoc) {  
	           document.getElementById('formDownload:hiddenId').value=idDoc;
	           document.getElementById('formDownload:linkDownload').click();  
	     	}  
		</script>
	</ui:define>
	<ui:define name="content">
		<h:form id="convenios" enctype="multipart/form-data">
		 	<p:growl id="growl" showDetail="false"/>  
			<p:panel styleClass="contentPanel">
				<h1>
					<h:outputText value="Gestión  de Información para Transferencia" />
				</h1>
				<p:panel id="Panel">
					<h2>
						Subir Resoluciones y Convenios por Programa de Reforzamiento Año #{procesoConveniosController.ano}<br />Servicio de Salud: #{loginController.servicio.nombre_servicio}
					</h2>
					<p class="parrafo">La tarea corresponde a nulla eget ultricies. Morbi pulvinar elit at justo pharetra, vitae ultricies est
						faucibus. Integer id est euismod libero rutrum ultricies. Integer aliquet, sem id commodo.nulla eget ultricies. Morbi pulvinar elit at
						justo pharetra, vitae ultricies est faucibus. Integer id est euismod libero rutrum ultricies. Integer aliquet, sem id commodo.</p>
					<div class="destacaArchivos ui-corner-all">
						
						
					</div>
					<h4>Filtros para la carga de Convenios:</h4>
					<h:panelGrid columns="3">
						<h:panelGrid>
							<h:outputText value="Programa: " styleClass="inputLabel" />
								<p:selectOneMenu id="programa" value="#{procesoConveniosController.programaSeleccionado}" style="width:450px;">
								<f:selectItem itemLabel="Seleccione un programa" itemValue="0" />
					            <f:selectItems itemLabel="#{programa.nombre}" itemValue="#{programa.idProgramaAno}" var="programa" value="#{procesoConveniosController.programas}" />
								<p:ajax listener="#{procesoConveniosController.cargarComponentesPorPrograma}" update="componente datosTabView" />
							</p:selectOneMenu>
						</h:panelGrid>
						<h:panelGrid>
							<h:outputText value="Componente: "  styleClass="inputLabel" />
							<p:selectOneMenu id="componente" value="#{procesoConveniosController.componenteSeleccionado}" style="width:450px;">
								<f:selectItem itemLabel="Seleccione un componente" itemValue="0" />
						   		<f:selectItems itemLabel="#{componente.nombre}" itemValue="#{componente.id}" var="componente" value="#{procesoConveniosController.componentes}" />
						   		<p:ajax listener="#{procesoConveniosController.resetSubtitulos}" update="datosTabView" />
							</p:selectOneMenu>
						</h:panelGrid>
						<h:panelGrid>
							<h:outputText value="" styleClass="inputLabel" />
							<p:commandButton value="Buscar" id="botonBuscar" actionListener="#{procesoConveniosController.buscar}" styleClass="x-btn-text icon-guardar" update="datosTabView growl" />
						</h:panelGrid>
					</h:panelGrid>
					<br />
					<h:panelGrid id="datosTabView">
					<p:tabView id="tabView" rendered="#{not empty procesoConveniosController.programa}" >
						<p:tab id="tab24" title="Subtítulo 24" rendered="#{procesoConveniosController.sub24}">
							<h:panelGrid>
								<h:panelGrid> 
									<h:outputText value="Comuna: " styleClass="inputLabel" />
									<p:selectOneMenu id="comuna" value="#{procesoConveniosController.comunaSeleccionada}" style="width:450px;">
										<f:selectItem itemLabel="Mostrar Todo" itemValue="0" />
										<f:selectItems itemLabel="#{_comuna.descComuna}" itemValue="#{_comuna.idComuna}" var="_comuna" value="#{procesoConveniosController.comunas}" />
										<p:ajax listener="#{procesoConveniosController.resetResolucionConveniosMunicipal}" update="Grid1" />
									</p:selectOneMenu>
								</h:panelGrid>
							</h:panelGrid>
							<br/>
							<p:dataTable id="Grid1" resizableColumns="true" value="#{procesoConveniosController.resolucionConveniosMunicipal}" liveResize="true" var="_data24" rows="10"
								paginator="false" paginatorPosition="bottom" emptyMessage="No se encontro información." styleClass="dataTable" rowIndexVar="rowIndexVarSub24">
								<p:columnGroup type="header">
									<p:row>
										<p:column width="15" />
										<p:column headerText="Comuna" />
										<p:column headerText="Programa / Componente" />
										<p:column headerText="Subtítulo" />
										<p:column headerText="Monto" />
										<p:column headerText="Cargar Información" />
									</p:row>
								</p:columnGroup>
								<p:column>
									<p:rowToggler />
								</p:column>
								<p:column>
									<span class="textoAjustado textoPequenio centrado">#{_data24.nombreComuna}</span>
								</p:column>
								<p:column>
									<span class="textoAjustado textoPequenio centrado">#{_data24.componente.nombre}</span>
								</p:column>
								<p:column>
									<span class="textoAjustado textoPequenio centrado">#{_data24.subtitulo.nombre}</span>
								</p:column>
								<p:column>
									<h:outputText value="#{_data24.montoIngresado}" styleClass="textoPequenio textoAjustado">
										<f:convertNumber type="currency" maxFractionDigits="0" locale="es_CL" currencySymbol="$" />
									</h:outputText>
								</p:column>
								<p:column>
									<p:commandButton value="#{((_data24.nuevo)? 'Cargar' : 'Modificar')}" action="#{procesoConveniosController.cargaConvenioSub24(rowIndexVarSub24)}" update=":#{p:component('leyesDialog')}" oncomplete="leyesDialog.show();" rendered="#{procesoConveniosController.leyRetiro}"/>
									<p:commandButton value="#{((_data24.nuevo)? 'Cargar' : 'Modificar')}" action="#{procesoConveniosController.cargaConvenioSub24(rowIndexVarSub24)}" update=":#{p:component('dlg3')}" oncomplete="dlg3.show();" rendered="#{not procesoConveniosController.leyRetiro}"/>
								</p:column>
								<p:rowExpansion>
									<!-- INICIO EXPANSION --> 
									    <p:dataTable id="SubGrid1" resizableColumns="true" value="#{procesoConveniosController.resolucionesMunicipal}" liveResize="true" var="_dataMunicipal" rows="10"
										paginator="false" paginatorPosition="bottom" emptyMessage="No se encontro información." styleClass="dataTable">
										<!-- <p:ajax event="rowToggle" listener="#{tableBean.onRowToggle}" update=":form:growl" />   -->
										<p:columnGroup type="header">
											<p:row>
												<p:column headerText="Fecha" />
												<p:column headerText="Número Resolución" />
												<p:column headerText="Monto Final" />
												<p:column headerText="Convenio" />
											</p:row>
										</p:columnGroup>
										<p:column>
											<h:outputText value="#{_dataMunicipal.fecha}" styleClass="textoPequenio textoAjustado">
												<f:convertDateTime pattern="dd/MMM/yyyy" />
											</h:outputText>
										</p:column>
										<p:column>
											<span class="textoAjustado textoPequenio centrado">#{_dataMunicipal.numeroResolucion}</span>
										</p:column>

										<p:column>
											<h:outputText value="#{_dataMunicipal.convenioMonto}" styleClass="textoPequenio textoAjustado">
												<f:convertNumber type="currency" maxFractionDigits="0" locale="es_CL" currencySymbol="$" />
											</h:outputText>
										</p:column>
										<p:column>
											<h:commandLink onclick="downloadDocument(#{_dataMunicipal.idConverio});return false;" >
												<h:graphicImage  value="resources/minsal/images/download-alt.png" styleClass="divapIcons" />
											</h:commandLink >
										</p:column>
									</p:dataTable>
									<!-- FIN EXPANSION -->
								</p:rowExpansion>
							</p:dataTable>
						</p:tab>
						<p:tab id="tab21" title="Subtítulo 21" rendered="#{procesoConveniosController.sub21}">
								<h:panelGrid>
									<h:panelGrid>
										<h:outputText value="Establecimiento: " styleClass="inputLabel" />
										<p:selectOneMenu id="establecimiento21" value="#{procesoConveniosController.establecimientoSeleccionado21}" style="width:450px;">
											<f:selectItem itemLabel="Mostrar Todo" itemValue="0" />
											<f:selectItems itemLabel="#{establecimiento.nombre}" itemValue="#{establecimiento.id}" var="establecimiento" value="#{procesoConveniosController.establecimientos}" />
											<p:ajax listener="#{procesoConveniosController.resetResolucionConveniosServicioSub21}"  update="Grid2" /> />
										</p:selectOneMenu>
									</h:panelGrid>
								</h:panelGrid>
								<br/>
								<p:dataTable id="Grid2" resizableColumns="true" value="#{procesoConveniosController.resolucionConveniosServicioSub21}" liveResize="true" var="_data21" rows="10"
								paginator="false" paginatorPosition="bottom" emptyMessage="No se encontro información." styleClass="dataTable" rowIndexVar="rowIndex21">
								<p:columnGroup type="header">
									<p:row>
										<p:column width="15" />
										<p:column headerText="Establecimiento" />
										<p:column headerText="Programa / Componente" />
										<p:column headerText="Subtítulo" />
										<p:column headerText="Monto" />
										<p:column headerText="Cargar Información" />
									</p:row>
								</p:columnGroup>

								<p:column>
									<p:rowToggler />
								</p:column>
								<p:column>
									<span class="textoAjustado textoPequenio centrado">#{_data21.nombreEstablecimiento}</span>
								</p:column>
								<p:column>
									<span class="textoAjustado textoPequenio centrado">#{_data21.componente.nombre}</span>
								</p:column>
								<p:column>
									<span class="textoAjustado textoPequenio centrado">#{_data21.subtitulo.nombre}</span>
								</p:column>
								<p:column>
									<h:outputText value="#{_data21.montoIngresado}" styleClass="textoPequenio textoAjustado">
										<f:convertNumber type="currency" maxFractionDigits="0" locale="es_CL" currencySymbol="$" />
									</h:outputText>
								</p:column>

								<p:column>
									<p:commandButton value="#{((_data21.nuevo)? 'Cargar' : 'Modificar')}"  action="#{procesoConveniosController.cargaConvenioSub21(rowIndex21)}" update=":#{p:component('dlg2')}" oncomplete="dlg2.show();" />
								</p:column>
								<p:rowExpansion>
										<!-- INICIO EXPANSION --> 
									    <p:dataTable id="SubGrid2" resizableColumns="true" value="#{procesoConveniosController.resolucionesServicios}" liveResize="true" var="_dataServicios" rows="10"
											paginator="false" paginatorPosition="bottom" emptyMessage="No se encontro información." styleClass="dataTable">
										<!-- <p:ajax event="rowToggle" listener="#{tableBean.onRowToggle}" update=":form:growl" />   -->
										<p:columnGroup type="header">
											<p:row>
												<p:column headerText="Fecha" />
												<p:column headerText="Número Resolución" />
												<p:column headerText="Monto Final" />
												<p:column headerText="Convenio" />
											</p:row>
										</p:columnGroup>
										<p:column>
											<h:outputText value="#{_dataServicios.fecha}" styleClass="textoPequenio textoAjustado">
												<f:convertDateTime pattern="dd/MMM/yyyy" />
											</h:outputText>
										</p:column>
										<p:column>
											<span class="textoAjustado textoPequenio centrado">#{_dataServicios.numeroResolucion}</span>
										</p:column>

										<p:column>
											<h:outputText value="#{_dataServicios.convenioMonto}" styleClass="textoPequenio textoAjustado">
												<f:convertNumber type="currency" maxFractionDigits="0" locale="es_CL" currencySymbol="$" />
											</h:outputText>
										</p:column>
										<p:column>
										     <h:commandLink onclick="downloadDocument(#{_dataServicios.idConverio});return false;" >
												<h:graphicImage  value="resources/minsal/images/download-alt.png" styleClass="divapIcons" />
											</h:commandLink >
										</p:column>
									</p:dataTable>
									<!-- FIN EXPANSION -->
								</p:rowExpansion>
							</p:dataTable>
						</p:tab>
						
						<p:tab id="tab22" title="Subtítulo 22" rendered="#{procesoConveniosController.sub22}">
								<h:panelGrid>
									<h:panelGrid>
										<h:outputText value="Establecimiento: " styleClass="inputLabel" />
										<p:selectOneMenu id="establecimiento22" value="#{procesoConveniosController.establecimientoSeleccionado22}" style="width:450px;">
											<f:selectItem itemLabel="Mostrar Todo" itemValue="0" />
											<f:selectItems itemLabel="#{establecimiento.nombre}" itemValue="#{establecimiento.id}" var="establecimiento" value="#{procesoConveniosController.establecimientos}" />
											<p:ajax listener="#{procesoConveniosController.resetResolucionConveniosServicioSub22}"  update="Grid22" /> />
										</p:selectOneMenu>
									</h:panelGrid>
								</h:panelGrid>
								<br/>
								<p:dataTable id="Grid22" resizableColumns="true" value="#{procesoConveniosController.resolucionConveniosServicioSub22}" liveResize="true" var="_data22" rows="10"
								paginator="false" paginatorPosition="bottom" emptyMessage="No se encontro información." styleClass="dataTable" rowIndexVar="rowIndex22">
								<p:columnGroup type="header">
									<p:row>
										<p:column width="15" />
										<p:column headerText="Establecimiento" />
										<p:column headerText="Programa / Componente" />
										<p:column headerText="Subtítulo" />
										<p:column headerText="Monto" />
										<p:column headerText="Cargar Información" />
									</p:row>
								</p:columnGroup>

								<p:column>
									<p:rowToggler />
								</p:column>
								<p:column>
									<span class="textoAjustado textoPequenio centrado">#{_data22.nombreEstablecimiento}</span>
								</p:column>
								<p:column>
									<span class="textoAjustado textoPequenio centrado">#{_data22.componente.nombre}</span>
								</p:column>
								<p:column>
									<span class="textoAjustado textoPequenio centrado">#{_data22.subtitulo.nombre}</span>
								</p:column>
								<p:column>
									<h:outputText value="#{_data22.montoIngresado}" styleClass="textoPequenio textoAjustado">
										<f:convertNumber type="currency" maxFractionDigits="0" locale="es_CL" currencySymbol="$" />
									</h:outputText>
								</p:column>

								<p:column>
									<p:commandButton value="#{((_data22.nuevo)? 'Cargar' : 'Modificar')}"  action="#{procesoConveniosController.cargaConvenioSub22(rowIndex22)}" update=":#{p:component('dlg2')}" oncomplete="dlg2.show();" />
								</p:column>
								<p:rowExpansion>
										<!-- INICIO EXPANSION --> 
									    <p:dataTable id="SubGrid2" resizableColumns="true" value="#{procesoConveniosController.resolucionesServicios22}" liveResize="true" var="_dataServicios" rows="10"
											paginator="false" paginatorPosition="bottom" emptyMessage="No se encontro información." styleClass="dataTable">
										<!-- <p:ajax event="rowToggle" listener="#{tableBean.onRowToggle}" update=":form:growl" />   -->
										<p:columnGroup type="header">
											<p:row>
												<p:column headerText="Fecha" />
												<p:column headerText="Número Resolución" />
												<p:column headerText="Monto Final" />
												<p:column headerText="Convenio" />
											</p:row>
										</p:columnGroup>
										<p:column>
											<h:outputText value="#{_dataServicios.fecha}" styleClass="textoPequenio textoAjustado">
												<f:convertDateTime pattern="dd/MMM/yyyy" />
											</h:outputText>
										</p:column>
										<p:column>
											<span class="textoAjustado textoPequenio centrado">#{_dataServicios.numeroResolucion}</span>
										</p:column>

										<p:column>
											<h:outputText value="#{_dataServicios.convenioMonto}" styleClass="textoPequenio textoAjustado">
												<f:convertNumber type="currency" maxFractionDigits="0" locale="es_CL" currencySymbol="$" />
											</h:outputText>
										</p:column>
										<p:column>
										     <h:commandLink onclick="downloadDocument(#{_dataServicios.idConverio});return false;" >
												<h:graphicImage  value="resources/minsal/images/download-alt.png" styleClass="divapIcons" />
											</h:commandLink >
										</p:column>
									</p:dataTable>
									<!-- FIN EXPANSION -->
								</p:rowExpansion>
							</p:dataTable>
						</p:tab>
						
						<p:tab id="tab29" title="Subtítulo 29" rendered="#{procesoConveniosController.sub29}">
								<h:panelGrid>
									<h:panelGrid>
										<h:outputText value="Establecimiento: " styleClass="inputLabel" />
										<p:selectOneMenu id="establecimiento29" value="#{procesoConveniosController.establecimientoSeleccionado29}" style="width:450px;">
											<f:selectItem itemLabel="Mostrar Todo" itemValue="0" />
											<f:selectItems itemLabel="#{establecimiento.nombre}" itemValue="#{establecimiento.id}" var="establecimiento" value="#{procesoConveniosController.establecimientos}" />
											<p:ajax listener="#{procesoConveniosController.resetResolucionConveniosServicioSub29}"  update="Grid29" /> />
										</p:selectOneMenu>
									</h:panelGrid>
								</h:panelGrid>
								<br/>
								<p:dataTable id="Grid29" resizableColumns="true" value="#{procesoConveniosController.resolucionConveniosServicioSub29}" liveResize="true" var="_data29" rows="10"
								paginator="false" paginatorPosition="bottom" emptyMessage="No se encontro información." styleClass="dataTable" rowIndexVar="rowIndex29">
								<p:columnGroup type="header">
									<p:row>
										<p:column width="15" />
										<p:column headerText="Establecimiento" />
										<p:column headerText="Programa / Componente" />
										<p:column headerText="Subtítulo" />
										<p:column headerText="Monto" />
										<p:column headerText="Cargar Información" />
									</p:row>
								</p:columnGroup>

								<p:column>
									<p:rowToggler />
								</p:column>
								<p:column>
									<span class="textoAjustado textoPequenio centrado">#{_data29.nombreEstablecimiento}</span>
								</p:column>
								<p:column>
									<span class="textoAjustado textoPequenio centrado">#{_data29.componente.nombre}</span>
								</p:column>
								<p:column>
									<span class="textoAjustado textoPequenio centrado">#{_data29.subtitulo.nombre}</span>
								</p:column>
								<p:column>
									<h:outputText value="#{_data29.montoIngresado}" styleClass="textoPequenio textoAjustado">
										<f:convertNumber type="currency" maxFractionDigits="0" locale="es_CL" currencySymbol="$" />
									</h:outputText>
								</p:column>

								<p:column>
									<p:commandButton value="#{((_data29.nuevo)? 'Cargar' : 'Modificar')}"  action="#{procesoConveniosController.cargaConvenioSub29(rowIndex29)}" update=":#{p:component('dlg2')}" oncomplete="dlg2.show();" />
								</p:column>
								<p:rowExpansion>
										<!-- INICIO EXPANSION --> 
									    <p:dataTable id="SubGrid2" resizableColumns="true" value="#{procesoConveniosController.resolucionesServicios29}" liveResize="true" var="_dataServicios" rows="10"
											paginator="false" paginatorPosition="bottom" emptyMessage="No se encontro información." styleClass="dataTable">
										<!-- <p:ajax event="rowToggle" listener="#{tableBean.onRowToggle}" update=":form:growl" />   -->
										<p:columnGroup type="header">
											<p:row>
												<p:column headerText="Fecha" />
												<p:column headerText="Número Resolución" />
												<p:column headerText="Monto Final" />
												<p:column headerText="Convenio" />
											</p:row>
										</p:columnGroup>
										<p:column>
											<h:outputText value="#{_dataServicios.fecha}" styleClass="textoPequenio textoAjustado">
												<f:convertDateTime pattern="dd/MMM/yyyy" />
											</h:outputText>
										</p:column>
										<p:column>
											<span class="textoAjustado textoPequenio centrado">#{_dataServicios.numeroResolucion}</span>
										</p:column>

										<p:column>
											<h:outputText value="#{_dataServicios.convenioMonto}" styleClass="textoPequenio textoAjustado">
												<f:convertNumber type="currency" maxFractionDigits="0" locale="es_CL" currencySymbol="$" />
											</h:outputText>
										</p:column>
										<p:column>
										     <h:commandLink onclick="downloadDocument(#{_dataServicios.idConverio});return false;" >
												<h:graphicImage  value="resources/minsal/images/download-alt.png" styleClass="divapIcons" />
											</h:commandLink >
										</p:column>
									</p:dataTable>
									<!-- FIN EXPANSION -->
								</p:rowExpansion>
							</p:dataTable>
						</p:tab>
					</p:tabView>
					</h:panelGrid>
					<p:growl id="growl2" showDetail="true" />
					<br />
				</p:panel>
				
				<p:commandButton value="Volver" styleClass="x-btn-text" action="bandejaTareas?faces-redirect=true indexMenu=0" ajax="false"	icon="ui-icon-seek-first" />
			</p:panel>
		</h:form>
		
		<h:form id="formDownload">
			<h:inputHidden value="#{procesoAsignacionPerCapitaController.docIdDownload}" id="hiddenId" />
			<h:commandButton id="linkDownload" action="#{procesoAsignacionPerCapitaController.downloadTemplate}" style="display: none"/>
		</h:form>
		
		<h:form id="formLeyes" enctype="multipart/form-data">
		<!-- DIALOG PARA SUBIR LEYES -->
		<p:panel styleClass="contentPanel">
				<p:dialog header="Ingreso de Convenios Leyes" id="leyesDialog" widgetVar="leyesDialog" modal="true" width="600">
					<h:panelGrid>
						<h:outputText value="Ley: " styleClass="inputLabel" />
						<h:outputText value="#{procesoConveniosController.programa.nombre}" />
					</h:panelGrid>
					<h:panelGrid>
					<h:outputText value="Número Resolución: " styleClass="inputLabel" />
						<p:inputText value="#{procesoConveniosController.convenioComuna.numeroResoucion}" />
					</h:panelGrid>
					<h:panelGrid>
						<h:outputText value="Subtitulo: " styleClass="inputLabel" />
						<h:outputText value="#{procesoConveniosController.convenioComuna.subtitulo.nombre}" />
					</h:panelGrid>
					<h:panelGrid>
						<h:outputText value="Comuna: " styleClass="inputLabel" />
						<h:outputText value="#{procesoConveniosController.convenioComuna.nombreComuna}" />
					</h:panelGrid>
					<h:panelGrid>
						<h:outputText value="Fecha de Convenio " styleClass="inputLabel" />
						 <h:outputText value="#{procesoConveniosController.currentDate}" styleClass="textoPequenio textoAjustado">
							<f:convertDateTime pattern="dd/MMM/yyyy" />
						</h:outputText>
					</h:panelGrid>
					<h:panelGrid>
						<h:outputText value="Monto Adelanto: " styleClass="inputLabel" />
						<p:inputText value="#{procesoConveniosController.convenioComuna.montoIngresado}" />
					</h:panelGrid>
					<h:panelGrid>
						<h:outputText value="Cuotas de Descuento: " styleClass="inputLabel" />
						<p:inputText value="#{procesoConveniosController.convenioComuna.cuotasDescuento}" />
					</h:panelGrid>
					<h:panelGrid>
						<h:outputText value="Monto Aporte Fiscal: " styleClass="inputLabel" />
						<h:outputText value="#{procesoConveniosController.montoAdicionalComplementario}" />
					</h:panelGrid>
					<h:panelGrid>
						<h:outputText value="Monto Adicional + Complementario: " styleClass="inputLabel" />
						<h:outputText value="#{procesoConveniosController.montoAdicionalComplementario}" />
					</h:panelGrid>
					<h:panelGrid>
						<h:outputText value="TOTAL" styleClass="inputLabel" />
						<h:outputText value="#{procesoConveniosController.totalLey}" styleClass="textoPequenio textoAjustado">
							<f:convertNumber type="currency" maxFractionDigits="0" locale="es_CL" currencySymbol="$" />
						</h:outputText>
					</h:panelGrid>
					<br />
					<div class="destacaArchivos ui-corner-all">
						<br />
						<h:panelGrid>
							<h:outputText value="Subir Convenio: " styleClass="inputLabel" />
							<p:fileUpload id="subirArchivoLeyes" fileUploadListener="#{procesoConveniosController.handleFileUploadConvenioFile}" value="#{procesoConveniosController.plantillaFile}" mode="simple" />
						</h:panelGrid>
						<br />
					</div>
					<p:commandButton value="Guardar" ajax="false" action="#{procesoConveniosController.guardarLeyRetiro}" styleClass="x-btn-text" icon="ui-icon-disk" oncomplete="leyesDialog.hide();"/>
					<p:commandButton value="Cancelar" onclick="leyesDialog.hide();" styleClass="x-btn-text" icon="ui-icon-cancel" />
				</p:dialog>
				</p:panel>
			</h:form>
		
		<h:form id="fromPupupComuna" enctype="multipart/form-data">
		 	<p:panel styleClass="contentPanel">
				<p:dialog header="Ingreso de Nuevo Convenio" modal="true"  id="dlg3" widgetVar="dlg3" width="600" >
				<h:panelGrid>
					<h:outputText value="Comuna: " styleClass="inputLabel" />
					<h:outputText value="#{procesoConveniosController.convenioComuna.nombreComuna}" />
				</h:panelGrid>
				<h:panelGrid>
					<h:outputText value="Número Resolución: " styleClass="inputLabel" />
					<p:inputText value="#{procesoConveniosController.convenioComuna.numeroResoucion}" required="true" requiredMessage="Debe especificar el número de resolción"/>
				</h:panelGrid>
				<h:panelGrid>
					<h:outputText value="Programa: " styleClass="inputLabel" />
					<h:outputText value="#{procesoConveniosController.programa.nombre}" />
				</h:panelGrid>
				<h:panelGrid>
					<h:outputText value="Componente: " styleClass="inputLabel" />
					<h:outputText value="#{procesoConveniosController.convenioComuna.componente.nombre}" />
				</h:panelGrid>
				<h:panelGrid>
					<h:outputText value="Subtitulo: " styleClass="inputLabel" />
					<h:outputText value="#{procesoConveniosController.convenioComuna.subtitulo.nombre}" />
				</h:panelGrid>
				<h:panelGrid>
					<h:outputText value="Monto: " styleClass="inputLabel" required="true" requiredMessage="Debe especificar el monto" />
					<p:inputText value="#{procesoConveniosController.convenioComuna.montoIngresado}" />
				</h:panelGrid>
				<br />
				<div class="destacaArchivos ui-corner-all">
					<br />
					<h:panelGrid>
						<h:outputText value="Subir un nuevo Archivo: " styleClass="inputLabel" />
						<p:fileUpload id="subirArchivoComuna" fileUploadListener="#{procesoConveniosController.handleFileUploadConvenioFile}" value="#{procesoConveniosController.plantillaFile}" mode="simple"
						required="true" requiredMessage="Archivo es obligatorio" />
					</h:panelGrid>
					<br />
				</div>
				<p:commandButton value="Guardar" ajax="false" action="#{procesoConveniosController.guardarConvenioComuna}"  oncomplete="dlg3.hide();" styleClass="x-btn-text" icon="ui-icon-disk" />
				<p:commandButton value="Cancelar" onclick="dlg3.hide();"  styleClass="x-btn-text" icon="ui-icon-cancel" />
			</p:dialog>
			</p:panel>
		</h:form>
		
		 <h:form id="fromPupupServicio" enctype="multipart/form-data">
		 	<p:panel styleClass="contentPanel">
				<p:dialog header="Ingreso de Nuevo Convenio" modal="true"  id="dlg2" widgetVar="dlg2" width="600" >
				<h:panelGrid>
					<h:outputText value="Establecimiento: " styleClass="inputLabel" />
					<h:outputText value="#{procesoConveniosController.convenioServicio.nombreEstablecimiento}" />
				</h:panelGrid>
				<h:panelGrid>
					<h:outputText value="Número Resolución: " styleClass="inputLabel" />
					<p:inputText value="#{procesoConveniosController.convenioServicio.numeroResoucion}" />
				</h:panelGrid>
				<h:panelGrid>
					<h:outputText value="Programa: " styleClass="inputLabel" />
					<h:outputText value="#{procesoConveniosController.programa.nombre}" />
				</h:panelGrid>
				<h:panelGrid>
					<h:outputText value="Componente: " styleClass="inputLabel" />
					<h:outputText value="#{procesoConveniosController.convenioServicio.componente.nombre}" />
				</h:panelGrid>
				<h:panelGrid>
					<h:outputText value="Subtitulo: " styleClass="inputLabel" />
					<h:outputText value="#{procesoConveniosController.convenioServicio.subtitulo.nombre}" />
				</h:panelGrid>
				<h:panelGrid>
					<h:outputText value="Monto: " styleClass="inputLabel" />
					<p:inputText value="#{procesoConveniosController.convenioServicio.montoIngresado}" />
				</h:panelGrid>
				<br />
				<div class="destacaArchivos ui-corner-all">
					<br />
					<h:panelGrid>
						<h:outputText value="Subir un nuevo Archivo: " styleClass="inputLabel" />
						<p:fileUpload id="subirArchivoServicio" fileUploadListener="#{procesoConveniosController.handleFileUploadConvenioFile}" value="#{procesoConveniosController.plantillaFile}" mode="simple" />
					</h:panelGrid>
					<br />
				</div>
				<p:commandButton value="Guardar" ajax="false" action="#{procesoConveniosController.guardarConvenioServicio}"  oncomplete="dlg2.hide();" styleClass="x-btn-text" icon="ui-icon-disk" />
				<p:commandButton value="Cancelar" onclick="dlg2.hide();"  styleClass="x-btn-text" icon="ui-icon-cancel" />
			</p:dialog>
			</p:panel>
		</h:form>
	</ui:define>
</ui:composition>