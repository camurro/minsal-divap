<?xml version="1.0" encoding="UTF-8"?>
<ui:composition xmlns="http://www.w3.org/1999/xhtml" xmlns:ui="http://java.sun.com/jsf/facelets" xmlns:f="http://java.sun.com/jsf/core"
	xmlns:h="http://java.sun.com/jsf/html" xmlns:p="http://primefaces.org/ui" template="/WEB-INF/templates/default.xhtml">

	<ui:define name="content">
		<h:form enctype="multipart/form-data">
			<p:panel styleClass="contentPanel">
				<h1>
					<h:outputText value="Distribución de Recursos Financieros por Programa" />
				</h1>
				<p:panel id="Panel">
					<h2>
						<span class="strong">Programa Valor Histórico Servicio Salud | </span>APOYO A LAS ACCIONES EN EL NIVEL PRIMARIO DE SALUD EN
						ESTABLECIMIENTOS DEPENDIENTES
					</h2>
					<p class="parrafo">La Planilla de Trabajo con Montos de Distribución contiene lorem ipsum dolor sit amet, consectetur adipiscing
						elit. Praesent egestas tempor nulla eget ultricies. Morbi pulvinar elit at justo pharetra, vitae ultricies est dignissim, justo nisi
						porttitor enim, eget ullamcorper felis augue eget lacus.</p>
					<br />
					<span class="strong"><h:outputText value="Inflactor Subtítulo 21" id="inflactor21" />: </span>1,3
						<p:tooltip for="inflactor21" value="Este inflactor es idéntico para cada Subtítulo 21 por Comuna/Establecimiento, se debe modificar en mantenedor." showEffect="slide"
						hideEffect="slide" />
					<br />
					<span class="strong"><h:outputText value="Inflactor Subtítulo 22" id="inflactor22" />: </span>1,35
						<p:tooltip for="inflactor22" value="Este inflactor es idéntico para cada Subtítulo 22 por Comuna/Establecimiento, se debe modificar en mantenedor." showEffect="slide"
						hideEffect="slide" />
					<br />
					<span class="strong"><h:outputText value="Inflactor Subtítulo 29" id="inflactor29" />: </span>1,45
						<p:tooltip for="inflactor29" value="Este inflactor es idéntico para cada Subtítulo 29 por Comuna/Establecimiento, se debe modificar en mantenedor." showEffect="slide"
						hideEffect="slide" />

					<h3>Filtros del Programa:</h3>
					<h:panelGrid id="busqueda_mis_tareas">
						<h:panelGrid>
							<h:outputText value="Servicio: " styleClass="inputLabel" />
							<p:selectOneMenu onchange="document.getElementById('tablaSubtitulos').style.display = 'block';">
								<f:selectItem itemLabel="Metropolitano Oriente" itemValue="Metropolitano Oriente" />
								<f:selectItem itemLabel="Concepción" itemValue="Concepción" />
								<f:selectItem itemLabel="Talcahuano" itemValue="Concepción" />
								<f:selectItem itemLabel="Iquique" itemValue="Concepción" />
								<f:selectItem itemLabel="Seleccione" itemValue="" />
							</p:selectOneMenu>
						</h:panelGrid>
					</h:panelGrid>
					<br />
					<div id="tablaSubtitulos" style="display: none;">
						<h3>Valores Históricos del Programa</h3>
						<h:form id="form1">
							<h:panelGrid>
								<p:dataTable resizableColumns="true" value="#{procesoDistRecFinController.listadoValorHistorico}" liveResize="true" var="_historico"
									rows="10" paginator="false" paginatorPosition="bottom" emptyMessage="No se encontro información." styleClass="dataTable">
									<p:columnGroup type="header">
										<p:row>
											<p:column rowspan="2" headerText="Establecimiento" />
											<p:column colspan="2" headerText="Subtítulo 21" />
											<p:column colspan="2" headerText="Subtítulo 22" />
											<p:column colspan="2" headerText="Subtítulo 29" />
											<p:column rowspan="2" headerText="Total 2013" />
											<p:column rowspan="2" headerText="Total 2014" />
										</p:row>
										<p:row>
											<p:column headerText="Val. 2013" />
											<!-- <p:column headerText="Inflactor" /> -->
											<p:column headerText="Val. 2014" />
											<p:column headerText="Val. 2013" />
											<!-- <p:column headerText="Inflactor" /> -->
											<p:column headerText="Val. 2014" />
											<p:column headerText="Val. 2013" />
											<!-- <p:column headerText="Inflactor" /> -->
											<p:column headerText="Val. 2014" />
										</p:row>
									</p:columnGroup>
									<p:column>
										<span class="textoAjustado textoPequenio">#{_historico.comuna}</span>
									</p:column>
									<p:column>
										<h:outputText value="#{_historico.valorHistoricoS21}" styleClass="divapProcesoDistRecFinProgInput">
											<f:convertNumber type="currency" maxFractionDigits="0" locale="es_CL" currencySymbol="$" />
										</h:outputText>
									</p:column>
									<!-- <p:column>
										<p:inputText value="#{_historico.inflactorS21}" styleClass="divapProcesoDistRecFinProgInput">
											<p:ajax event="keyup" update="total,subTotal21,subTotal22,subTotal29" />
											<f:convertNumber maxFractionDigits="2" />
										</p:inputText>
									</p:column> -->
									<p:column>
										<p:inputText styleClass="divapProcesoDistRecFinProgInput" value="#{_historico.totalS21}" id="subTotal21">
											<f:convertNumber maxFractionDigits="0" groupingUsed="true" />
											<p:ajax event="keyup" update="total,subTotal21,subTotal22,subTotal29" />
										</p:inputText>
									</p:column>

									<p:column>
										<h:outputText value="#{_historico.valorHistoricoS22}" styleClass="divapProcesoDistRecFinProgInput">
											<f:convertNumber type="currency" maxFractionDigits="0" locale="es_CL" currencySymbol="$" />
										</h:outputText>
									</p:column>
									<!-- <p:column>
										<p:inputText value="#{_historico.inflactorS22}" styleClass="divapProcesoDistRecFinProgInput">
											<p:ajax event="keyup" update="total,subTotal21,subTotal22,subTotal29" />
											<f:convertNumber maxFractionDigits="2" />
										</p:inputText>
									</p:column>-->
									<p:column>
										<p:inputText styleClass="divapProcesoDistRecFinProgInput" value="#{_historico.totalS22}" id="subTotal22">
											<f:convertNumber maxFractionDigits="0" groupingUsed="true" />
											<p:ajax event="keyup" update="total,subTotal21,subTotal22,subTotal29" />
										</p:inputText>
									</p:column>

									<p:column>
										<h:outputText value="#{_historico.valorHistoricoS29}" styleClass="divapProcesoDistRecFinProgInput">
											<f:convertNumber type="currency" maxFractionDigits="0" locale="es_CL" currencySymbol="$" />
										</h:outputText>
									</p:column>
									<!-- <p:column>
										<p:inputText value="#{_historico.inflactorS29}" styleClass="divapProcesoDistRecFinProgInput">
											<p:ajax event="keyup" update="total,subTotal21,subTotal22,subTotal29" />
											<f:convertNumber maxFractionDigits="2" />
										</p:inputText>
									</p:column>-->
									<p:column>
										<p:inputText styleClass="divapProcesoDistRecFinProgInput" value="#{_historico.totalS29}" id="subTotal29">
											<f:convertNumber maxFractionDigits="0" groupingUsed="true" />
											<p:ajax event="keyup" update="total,subTotal21,subTotal22,subTotal29" />
										</p:inputText>
									</p:column>

									<p:column>
										<h:outputText styleClass="textoAjustado divapProcesoDistRecFinProgInput"
											value="#{_historico.totalS21+_historico.totalS22+_historico.totalS29}" id="total">
											<f:convertNumber type="currency" maxFractionDigits="0" locale="es_CL" currencySymbol="$" />
										</h:outputText>
									</p:column>
									
									<p:column>
										<h:outputText styleClass="textoAjustado divapProcesoDistRecFinProgInput"
											value="#{_historico.valorHistoricoS21+_historico.valorHistoricoS22+_historico.valorHistoricoS29}" id="totalHistorico">
											<f:convertNumber type="currency" maxFractionDigits="0" locale="es_CL" currencySymbol="$" />
										</h:outputText>
									</p:column>
									
									<p:columnGroup type="footer">
										<p:row>
											<p:column />
											<p:column>
												<f:facet name="footer">
													<h:outputText value="#{procesoDistRecFinController.totalS21-998877}" id="totalHistoricoS21" styleClass="textoAjustado textoPequenio">
														<f:convertNumber type="currency" maxFractionDigits="0" locale="es_CL" currencySymbol="$" />
													</h:outputText>
												</f:facet>
											</p:column>
											<p:column>
												<f:facet name="footer">
													<h:outputText value="#{procesoDistRecFinController.totalS21}" id="totalS21" styleClass="textoAjustado textoPequenio">
														<f:convertNumber type="currency" maxFractionDigits="0" locale="es_CL" currencySymbol="$" />
													</h:outputText>
												</f:facet>
											</p:column>

											<p:column>
												<f:facet name="footer">
													<h:outputText value="#{procesoDistRecFinController.totalS22-998877}" id="totalHistoricoS22" styleClass="textoAjustado textoPequenio">
														<f:convertNumber type="currency" maxFractionDigits="0" locale="es_CL" currencySymbol="$" />
													</h:outputText>
												</f:facet>
											</p:column>
											<p:column>
												<f:facet name="footer">
													<h:outputText value="#{procesoDistRecFinController.totalS22}" id="totalS22" styleClass="textoAjustado textoPequenio">
														<f:convertNumber type="currency" maxFractionDigits="0" locale="es_CL" currencySymbol="$" />
													</h:outputText>
												</f:facet>
											</p:column>


											<p:column>
												<f:facet name="footer">
													<h:outputText value="#{procesoDistRecFinController.totalS29-998877}" id="totalHistoricoS29" styleClass="textoAjustado textoPequenio">
														<f:convertNumber type="currency" maxFractionDigits="0" locale="es_CL" currencySymbol="$" />
													</h:outputText>
												</f:facet>
											</p:column>
											<p:column>
												<f:facet name="footer">
													<h:outputText value="#{procesoDistRecFinController.totalS29}" id="totalS29" styleClass="textoAjustado textoPequenio">
														<f:convertNumber type="currency" maxFractionDigits="0" locale="es_CL" currencySymbol="$" />
													</h:outputText>
												</f:facet>
											</p:column>

											<p:column>
												<f:facet name="footer">
													<h:outputText
														value="#{procesoDistRecFinController.totalS21+procesoDistRecFinController.totalS22+procesoDistRecFinController.totalS29-998877}"
														id="totalesHistorico" styleClass="textoAjustado textoPequenio">
														<f:convertNumber type="currency" maxFractionDigits="0" locale="es_CL" currencySymbol="$" />
													</h:outputText>
												</f:facet>
											</p:column>

											<p:column>
												<f:facet name="footer">
													<h:outputText
														value="#{procesoDistRecFinController.totalS21+procesoDistRecFinController.totalS22+procesoDistRecFinController.totalS29}"
														id="totales" styleClass="textoAjustado textoPequenio">
														<f:convertNumber type="currency" maxFractionDigits="0" locale="es_CL" currencySymbol="$" />
													</h:outputText>
												</f:facet>
											</p:column>
										</p:row>>
									</p:columnGroup>
								</p:dataTable>
							</h:panelGrid>

							<p:commandButton styleClass="x-btn-text" icon="ui-icon-disk" action="#" ajax="true" value="Guardar" />
							<p:commandButton value="Finalizar" styleClass="x-btn-text"
								action="divapProcesoDistRecFinProgSeguimientoDocumentacion?faces-redirect=true" ajax="false" icon="ui-icon-seek-first" />
						</h:form>
					</div>
				</p:panel>

				<p:commandButton value="Volver" styleClass="x-btn-text" action="bandejaTareas?faces-redirect=true indexMenu=0" ajax="false"
					icon="ui-icon-seek-first" />
			</p:panel>
		</h:form>
	</ui:define>
</ui:composition>