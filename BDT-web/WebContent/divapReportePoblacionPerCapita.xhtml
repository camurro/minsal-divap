<?xml version="1.0" encoding="UTF-8"?>
<ui:composition xmlns="http://www.w3.org/1999/xhtml"
	xmlns:ui="http://java.sun.com/jsf/facelets"
	xmlns:f="http://java.sun.com/jsf/core"
	xmlns:h="http://java.sun.com/jsf/html"
	xmlns:p="http://primefaces.org/ui"
	template="/WEB-INF/templates/default.xhtml">

	<ui:define name="content">
		<h:form id="formTabView" enctype="multipart/form-data">
			<p:panel styleClass="contentPanel">
				<h1>
					<h:outputText value="DIVAP Reportes" />
				</h1>
				<p:panel id="Panel">
					<h2>Población Per Capita</h2>

					<div class="destacaArchivos ui-corner-all">
						<h3>Archivos Disponibles:</h3>
						<span class="strong">Archivo: </span> Planilla Población Per
						Capita [
						<h:graphicImage value="resources/minsal/images/download-alt.png"
							styleClass="divapIcons" />
						<h:commandLink
										action="#{reportesPoblacionPercapitaController.downloadTemplate}"
										value="Bajar">
										<f:setPropertyActionListener
											target="#{reportesPoblacionPercapitaController.docIdDownload}"
											value="#{reportesPoblacionPercapitaController.idPlanillaPercapita}" />
									</h:commandLink>
						]
					</div>
					<br />
					
							<h:panelGrid>
								<h:outputText value="Servicio: " styleClass="inputLabel" />
								<p:selectOneMenu style="width:650px;" id="cbServicio"
									value="#{reportesPoblacionPercapitaController.valorComboServicio}">
									<f:selectItem itemLabel="Seleccione" itemValue="0" />
									<f:selectItems
										value="#{reportesPoblacionPercapitaController.servicios}"
										itemLabel="#{servicio.nombre_servicio}"
										itemValue="#{servicio.id_servicio}" var="servicio" />
									<p:ajax
										listener="#{reportesPoblacionPercapitaController.cargarComunas}"
										update="cbComuna tabView" />
								</p:selectOneMenu>
							</h:panelGrid>

							<h:panelGrid>
								<h:outputText value="Comuna: " styleClass="inputLabel" />
								<p:selectOneMenu style="width:650px;" id="cbComuna"
									value="#{reportesPoblacionPercapitaController.valorComboComuna}">
									<f:selectItem itemLabel="Seleccione" itemValue="0" />
									<f:selectItems
										value="#{reportesPoblacionPercapitaController.servicioSeleccionado.comunas}"
										itemLabel="#{comuna.nombre}" itemValue="#{comuna.id}"
										var="comuna" />
									<p:ajax
										listener="#{reportesPoblacionPercapitaController.cargarTablaServiciosFiltradosComuna}"
										update="tabView">
									</p:ajax>
								</p:selectOneMenu>
							</h:panelGrid>
						
							
					

					<p:tabView id="tabView">
						<p:ajax event="tabChange" listener="#{reportesPoblacionPercapitaController.onTabChange}" update="tabView :formTabView:cbServicio :formTabView:cbComuna" />
						
						<p:tab id="tab2014" title="Año 2014">
							<br />
							<p:dataTable id="tabladatos2014" resizableColumns="true"
								value="#{reportesPoblacionPercapitaController.reportesPerCapitaVO}"
								liveResize="true" var="_data" rows="10" paginator="false"
								paginatorPosition="bottom"
								emptyMessage="No se encontro información."
								styleClass="dataTable" scrollable="true">

								<p:columnGroup type="header">
									<p:row>
										<p:column headerText="Región" width="250" />
										<p:column headerText="Servicio" width="250" />
										<p:column headerText="Comuna" width="250" />
										<p:column headerText="Clasificación" width="250" />
										<p:column headerText="Valor Per Capita" width="250" />
										<p:column headerText="Población" width="250" />
										<p:column headerText="Población Mayor 65 y Mas Años" width="250" />
										<p:column headerText="Per Capita Año" width="250" />
										<p:column headerText="Desempeño Difícil" width="250" />
										<p:column headerText="Aporte Estatal" width="250" />
										<p:column headerText="Rebaja IAAPS" width="250" />
										<p:column headerText="Descuento por Incentivo al Retiro" width="250" />
										<p:column headerText="Aporte Estatal Final" width="250" />
									</p:row>
								</p:columnGroup>

								<p:column>
									<span class="textoAjustado textoPequenio centrado">#{_data.region}</span>
								</p:column>
								<p:column>
									<span class="textoAjustado textoPequenio centrado">#{_data.servicio}</span>
								</p:column>
								<p:column>
									<span class="textoAjustado textoPequenio centrado">#{_data.comuna}</span>
								</p:column>

								<p:column>
									<span class="textoAjustado textoPequenio centrado">#{_data.clasificacion}</span>
								</p:column>
								<p:column>
									<h:outputText value="#{_data.valorPercapita}"
										styleClass="textoPequenio textoAjustado">
										<f:convertNumber type="currency" maxFractionDigits="0"
											locale="es_CL" currencySymbol="$" />
									</h:outputText>
								</p:column>
								<p:column>
									<h:outputText value="#{_data.poblacion}"
										styleClass="textoPequenio textoAjustado">
										<f:convertNumber type="number" maxFractionDigits="0" />
									</h:outputText>
								</p:column>
								<p:column>
									<h:outputText value="#{_data.poblacion65mayor}"
										styleClass="textoPequenio textoAjustado">
										<f:convertNumber type="number" maxFractionDigits="0" />
									</h:outputText>
								</p:column>
								<p:column>
									<h:outputText value="#{_data.percapita}"
										styleClass="textoPequenio textoAjustado">
										<f:convertNumber type="currency" maxFractionDigits="0"
											locale="es_CL" currencySymbol="$" />
									</h:outputText>
								</p:column>
								<p:column>
									<h:outputText value="#{_data.desempenoDificil}"
										styleClass="textoPequenio textoAjustado">
										<f:convertNumber type="currency" maxFractionDigits="0"
											locale="es_CL" currencySymbol="$" />
									</h:outputText>
								</p:column>
								<p:column>
									<h:outputText value="#{_data.aporteEstatal}"
										styleClass="textoPequenio textoAjustado">
										<f:convertNumber type="currency" maxFractionDigits="0"
											locale="es_CL" currencySymbol="$" />
									</h:outputText>
								</p:column>
								<p:column>
									<h:outputText value="#{_data.rebajaIAAPS}"
										styleClass="textoPequenio textoAjustado">
										<f:convertNumber type="currency" maxFractionDigits="0"
											locale="es_CL" currencySymbol="$" />
									</h:outputText>
								</p:column>
								<p:column>
									<h:outputText value="#{_data.descuentoIncentivoRetiro}"
										styleClass="textoPequenio textoAjustado">
										<f:convertNumber type="currency" maxFractionDigits="0"
											locale="es_CL" currencySymbol="$" />
									</h:outputText>
								</p:column>
								<p:column>
									<h:outputText value="#{_data.aporteEstatalFinal}"
										styleClass="textoPequenio textoAjustado">
										<f:convertNumber type="currency" maxFractionDigits="0"
											locale="es_CL" currencySymbol="$" />
									</h:outputText>
								</p:column>

							</p:dataTable>

						</p:tab>
						
						
						
						
						<p:tab id="tab2013" title="Año 2013">
							<br />
							<p:dataTable id="tabladatos2013" resizableColumns="true"
								value="#{reportesPoblacionPercapitaController.reportesPerCapitaVO}"
								liveResize="true" var="_data" rows="10" paginator="false"
								paginatorPosition="bottom"
								emptyMessage="No se encontro información."
								styleClass="dataTable" scrollable="true">

								<p:columnGroup type="header">
									<p:row>
										<p:column headerText="Región" width="250" />
										<p:column headerText="Servicio" width="250" />
										<p:column headerText="Comuna" width="250" />
										<p:column headerText="Clasificación" width="250" />
										<p:column headerText="Valor Per Capita" width="250" />
										<p:column headerText="Población" width="250" />
										<p:column headerText="Población Mayor 65 y Mas Años" width="250" />
										<p:column headerText="Per Capita Año" width="250" />
										<p:column headerText="Desempeño Difícil" width="250" />
										<p:column headerText="Aporte Estatal" width="250" />
										<p:column headerText="Rebaja IAAPS" width="250" />
										<p:column headerText="Descuento por Incentivo al Retiro" width="250" />
										<p:column headerText="Aporte Estatal Final" width="250" />
									</p:row>
								</p:columnGroup>

								<p:column>
									<span class="textoAjustado textoPequenio centrado">#{_data.region}</span>
								</p:column>
								<p:column>
									<span class="textoAjustado textoPequenio centrado">#{_data.servicio}</span>
								</p:column>
								<p:column>
									<span class="textoAjustado textoPequenio centrado">#{_data.comuna}</span>
								</p:column>

								<p:column>
									<span class="textoAjustado textoPequenio centrado">#{_data.clasificacion}</span>
								</p:column>
								<p:column>
									<h:outputText value="#{_data.valorPercapita}"
										styleClass="textoPequenio textoAjustado">
										<f:convertNumber type="currency" maxFractionDigits="0"
											locale="es_CL" currencySymbol="$" />
									</h:outputText>
								</p:column>
								<p:column>
									<h:outputText value="#{_data.poblacion}"
										styleClass="textoPequenio textoAjustado">
										<f:convertNumber type="number" maxFractionDigits="0" />
									</h:outputText>
								</p:column>
								<p:column>
									<h:outputText value="#{_data.poblacion65mayor}"
										styleClass="textoPequenio textoAjustado">
										<f:convertNumber type="number" maxFractionDigits="0" />
									</h:outputText>
								</p:column>
								<p:column>
									<h:outputText value="#{_data.percapita}"
										styleClass="textoPequenio textoAjustado">
										<f:convertNumber type="currency" maxFractionDigits="0"
											locale="es_CL" currencySymbol="$" />
									</h:outputText>
								</p:column>
								<p:column>
									<h:outputText value="#{_data.desempenoDificil}"
										styleClass="textoPequenio textoAjustado">
										<f:convertNumber type="currency" maxFractionDigits="0"
											locale="es_CL" currencySymbol="$" />
									</h:outputText>
								</p:column>
								<p:column>
									<h:outputText value="#{_data.aporteEstatal}"
										styleClass="textoPequenio textoAjustado">
										<f:convertNumber type="currency" maxFractionDigits="0"
											locale="es_CL" currencySymbol="$" />
									</h:outputText>
								</p:column>
								<p:column>
									<h:outputText value="#{_data.rebajaIAAPS}"
										styleClass="textoPequenio textoAjustado">
										<f:convertNumber type="currency" maxFractionDigits="0"
											locale="es_CL" currencySymbol="$" />
									</h:outputText>
								</p:column>
								<p:column>
									<h:outputText value="#{_data.descuentoIncentivoRetiro}"
										styleClass="textoPequenio textoAjustado">
										<f:convertNumber type="currency" maxFractionDigits="0"
											locale="es_CL" currencySymbol="$" />
									</h:outputText>
								</p:column>
								<p:column>
									<h:outputText value="#{_data.aporteEstatalFinal}"
										styleClass="textoPequenio textoAjustado">
										<f:convertNumber type="currency" maxFractionDigits="0"
											locale="es_CL" currencySymbol="$" />
									</h:outputText>
								</p:column>

							</p:dataTable>

						</p:tab>
						
						<p:tab id="tab2012" title="Año 2012">
							<br />
							<p:dataTable id="tabladatos2012" resizableColumns="true"
								value="#{reportesPoblacionPercapitaController.reportesPerCapitaVO}"
								liveResize="true" var="_data" rows="10" paginator="false"
								paginatorPosition="bottom"
								emptyMessage="No se encontro información."
								styleClass="dataTable" scrollable="true">

								<p:columnGroup type="header">
									<p:row>
										<p:column headerText="Región" width="250" />
										<p:column headerText="Servicio" width="250" />
										<p:column headerText="Comuna" width="250" />
										<p:column headerText="Clasificación" width="250" />
										<p:column headerText="Valor Per Capita" width="250" />
										<p:column headerText="Población" width="250" />
										<p:column headerText="Población Mayor 65 y Mas Años" width="250" />
										<p:column headerText="Per Capita Año" width="250" />
										<p:column headerText="Desempeño Difícil" width="250" />
										<p:column headerText="Aporte Estatal" width="250" />
										<p:column headerText="Rebaja IAAPS" width="250" />
										<p:column headerText="Descuento por Incentivo al Retiro" width="250" />
										<p:column headerText="Aporte Estatal Final" width="250" />
									</p:row>
								</p:columnGroup>

								<p:column>
									<span class="textoAjustado textoPequenio centrado">#{_data.region}</span>
								</p:column>
								<p:column>
									<span class="textoAjustado textoPequenio centrado">#{_data.servicio}</span>
								</p:column>
								<p:column>
									<span class="textoAjustado textoPequenio centrado">#{_data.comuna}</span>
								</p:column>

								<p:column>
									<span class="textoAjustado textoPequenio centrado">#{_data.clasificacion}</span>
								</p:column>
								<p:column>
									<h:outputText value="#{_data.valorPercapita}"
										styleClass="textoPequenio textoAjustado">
										<f:convertNumber type="currency" maxFractionDigits="0"
											locale="es_CL" currencySymbol="$" />
									</h:outputText>
								</p:column>
								<p:column>
									<h:outputText value="#{_data.poblacion}"
										styleClass="textoPequenio textoAjustado">
										<f:convertNumber type="number" maxFractionDigits="0" />
									</h:outputText>
								</p:column>
								<p:column>
									<h:outputText value="#{_data.poblacion65mayor}"
										styleClass="textoPequenio textoAjustado">
										<f:convertNumber type="number" maxFractionDigits="0" />
									</h:outputText>
								</p:column>
								<p:column>
									<h:outputText value="#{_data.percapita}"
										styleClass="textoPequenio textoAjustado">
										<f:convertNumber type="currency" maxFractionDigits="0"
											locale="es_CL" currencySymbol="$" />
									</h:outputText>
								</p:column>
								<p:column>
									<h:outputText value="#{_data.desempenoDificil}"
										styleClass="textoPequenio textoAjustado">
										<f:convertNumber type="currency" maxFractionDigits="0"
											locale="es_CL" currencySymbol="$" />
									</h:outputText>
								</p:column>
								<p:column>
									<h:outputText value="#{_data.aporteEstatal}"
										styleClass="textoPequenio textoAjustado">
										<f:convertNumber type="currency" maxFractionDigits="0"
											locale="es_CL" currencySymbol="$" />
									</h:outputText>
								</p:column>
								<p:column>
									<h:outputText value="#{_data.rebajaIAAPS}"
										styleClass="textoPequenio textoAjustado">
										<f:convertNumber type="currency" maxFractionDigits="0"
											locale="es_CL" currencySymbol="$" />
									</h:outputText>
								</p:column>
								<p:column>
									<h:outputText value="#{_data.descuentoIncentivoRetiro}"
										styleClass="textoPequenio textoAjustado">
										<f:convertNumber type="currency" maxFractionDigits="0"
											locale="es_CL" currencySymbol="$" />
									</h:outputText>
								</p:column>
								<p:column>
									<h:outputText value="#{_data.aporteEstatalFinal}"
										styleClass="textoPequenio textoAjustado">
										<f:convertNumber type="currency" maxFractionDigits="0"
											locale="es_CL" currencySymbol="$" />
									</h:outputText>
								</p:column>

							</p:dataTable>

						</p:tab>
						
						
						
						<p:tab id="tab2011" title="Año 2011">
							<br />
							<p:dataTable id="tabladatos2011" resizableColumns="true"
								value="#{reportesPoblacionPercapitaController.reportesPerCapitaVO}"
								liveResize="true" var="_data" rows="#{reportesPoblacionPercapitaController.reportesPerCapitaVO.size}" paginator="false"
								paginatorPosition="bottom"
								emptyMessage="No se encontro información."
								styleClass="dataTable" scrollable="true">

								<p:columnGroup type="header">
									<p:row>
										<p:column headerText="Región" width="250" />
										<p:column headerText="Servicio" width="250" />
										<p:column headerText="Comuna" width="250" />
										<p:column headerText="Clasificación" width="250" />
										<p:column headerText="Valor Per Capita" width="250" />
										<p:column headerText="Población" width="250" />
										<p:column headerText="Población Mayor 65 y Mas Años" width="250" />
										<p:column headerText="Per Capita Año" width="250" />
										<p:column headerText="Desempeño Difícil" width="250" />
										<p:column headerText="Aporte Estatal" width="250" />
										<p:column headerText="Rebaja IAAPS" width="250" />
										<p:column headerText="Descuento por Incentivo al Retiro" width="250" />
										<p:column headerText="Aporte Estatal Final" width="250" />
									</p:row>
								</p:columnGroup>

								<p:column>
									<span class="textoAjustado textoPequenio centrado">#{_data.region}</span>
								</p:column>
								<p:column>
									<span class="textoAjustado textoPequenio centrado">#{_data.servicio}</span>
								</p:column>
								<p:column>
									<span class="textoAjustado textoPequenio centrado">#{_data.comuna}</span>
								</p:column>

								<p:column>
									<span class="textoAjustado textoPequenio centrado">#{_data.clasificacion}</span>
								</p:column>
								<p:column>
									<h:outputText value="#{_data.valorPercapita}"
										styleClass="textoPequenio textoAjustado">
										<f:convertNumber type="currency" maxFractionDigits="0"
											locale="es_CL" currencySymbol="$" />
									</h:outputText>
								</p:column>
								<p:column>
									<h:outputText value="#{_data.poblacion}"
										styleClass="textoPequenio textoAjustado">
										<f:convertNumber type="number" maxFractionDigits="0" />
									</h:outputText>
								</p:column>
								<p:column>
									<h:outputText value="#{_data.poblacion65mayor}"
										styleClass="textoPequenio textoAjustado">
										<f:convertNumber type="number" maxFractionDigits="0" />
									</h:outputText>
								</p:column>
								<p:column>
									<h:outputText value="#{_data.percapita}"
										styleClass="textoPequenio textoAjustado">
										<f:convertNumber type="currency" maxFractionDigits="0"
											locale="es_CL" currencySymbol="$" />
									</h:outputText>
								</p:column>
								<p:column>
									<h:outputText value="#{_data.desempenoDificil}"
										styleClass="textoPequenio textoAjustado">
										<f:convertNumber type="currency" maxFractionDigits="0"
											locale="es_CL" currencySymbol="$" />
									</h:outputText>
								</p:column>
								<p:column>
									<h:outputText value="#{_data.aporteEstatal}"
										styleClass="textoPequenio textoAjustado">
										<f:convertNumber type="currency" maxFractionDigits="0"
											locale="es_CL" currencySymbol="$" />
									</h:outputText>
								</p:column>
								<p:column>
									<h:outputText value="#{_data.rebajaIAAPS}"
										styleClass="textoPequenio textoAjustado">
										<f:convertNumber type="currency" maxFractionDigits="0"
											locale="es_CL" currencySymbol="$" />
									</h:outputText>
								</p:column>
								<p:column>
									<h:outputText value="#{_data.descuentoIncentivoRetiro}"
										styleClass="textoPequenio textoAjustado">
										<f:convertNumber type="currency" maxFractionDigits="0"
											locale="es_CL" currencySymbol="$" />
									</h:outputText>
								</p:column>
								<p:column>
									<h:outputText value="#{_data.aporteEstatalFinal}"
										styleClass="textoPequenio textoAjustado">
										<f:convertNumber type="currency" maxFractionDigits="0"
											locale="es_CL" currencySymbol="$" />
									</h:outputText>
								</p:column>

							</p:dataTable>

						</p:tab>
						
					</p:tabView>
					
					
					
				</p:panel>

				<p:commandButton value="Volver" styleClass="x-btn-text"
					action="bandejaTareas?faces-redirect=true indexMenu=0" ajax="false"
					icon="ui-icon-seek-first" />
			</p:panel>
		</h:form>
	</ui:define>
</ui:composition>