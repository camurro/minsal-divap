<?xml version="1.0" encoding="UTF-8"?>
<ui:composition xmlns="http://www.w3.org/1999/xhtml"
	xmlns:ui="http://java.sun.com/jsf/facelets"
	xmlns:f="http://java.sun.com/jsf/core"
	xmlns:h="http://java.sun.com/jsf/html"
	xmlns:p="http://primefaces.org/ui"
	template="/WEB-INF/templates/default.xhtml"
	xmlns:c="http://java.sun.com/jsp/jstl/core"
	xmlns:fn="http://java.sun.com/jsp/jstl/functions">

	<ui:define name="zonaJavaScript">
		<style type="text/css">
.ui-state-error {
	margin-left: 0px;
}
</style>
		<script type="text/javascript">

		function cambiaSubtitulo22(){
			document.getElementById('tablaSubtitulos').style.display = 'block';
		}
		function cambiaSubtitulo24(){
			document.getElementById('tablaSubtitulos').style.display = 'block';
		}
		function cambiaSubtitulo29(){
			document.getElementById('tablaSubtitulos').style.display = 'block';
		}
		</script>
	</ui:define>

	<ui:define name="content">
		<h:form enctype="multipart/form-data" id="form">
			<p:growl id="msgs" showDetail="true" />
			<p:panel styleClass="contentPanel" id="panel">
				<h1>
					<h:outputText value="Consolidado de Revisión y Validación de Monitoreos por Programa" />
				</h1>
				<p:panel id="panel2">
					<h2>Programa: #{procesoEstimacionFlujoCajaConsolidadorRevisarMonitoreoController.programa.nombre}"</h2>
					<p class="parrafo">Lorem ipsum dolor sit amet, consectetur
						adipiscing elit. Praesent egestas tempor nulla eget ultricies.
						Morbi pulvinar elit at justo pharetra, vitae ultricies est
						dignissim, justo nisi porttitor enim, eget ullamcorper felis augue
						eget lacus.</p>
					<br />

					<div id="tablaSubtitulos" style="display: block;">
						<!-- ARCHIVOS DE TAREA -->
						<h3>Archivos disponibles para la Tarea:</h3>
						<div class="destacaArchivos ui-corner-all">
							<ul class="versionesArchivo">
								<li>
									<!-- 	<h:graphicImage
										value="resources/minsal/images/download-alt.png"
										styleClass="divapIcons" /> <p:commandLink
										value="Planilla completa actualizada de Programacion de Caja.xls" /> -->
									Planilla completa actualizada de Programacion de Caja.xls [ <h:graphicImage
										value="resources/minsal/images/download-alt.png"
										styleClass="divapIcons" /> <h:commandLink
										action="#{procesoEstimacionFlujoCajaConsolidadorRevisarMonitoreoController.downloadTemplate}"
										value="Bajar">
										<f:setPropertyActionListener
											target="#{procesoEstimacionFlujoCajaConsolidadorRevisarMonitoreoController.docIdDownload}"
											value="#{procesoEstimacionFlujoCajaConsolidadorRevisarMonitoreoController.docProgramacion}" />
									</h:commandLink> ]



								</li>
								<li>
									<!-- <h:graphicImage
										value="resources/minsal/images/download-alt.png"
										styleClass="divapIcons" /> <p:commandLink
										value="Planilla Programacion de Caja - propuesta mes Julio.xls" /> -->

									Planilla Programacion de Caja - propuesta mes Julio.xls [ <h:graphicImage
										value="resources/minsal/images/download-alt.png"
										styleClass="divapIcons" /> <h:commandLink
										action="#{procesoEstimacionFlujoCajaConsolidadorRevisarMonitoreoController.downloadTemplate}"
										value="Bajar">
										<f:setPropertyActionListener
											target="#{procesoEstimacionFlujoCajaConsolidadorRevisarMonitoreoController.docIdDownload}"
											value="#{procesoEstimacionFlujoCajaConsolidadorRevisarMonitoreoController.docPropuesta}" />
									</h:commandLink> ]

								</li>
							</ul>
						</div>
						<br />
						<ui:param name="mes" value="#{procesoEstimacionFlujoCajaConsolidadorRevisarMonitoreoController.mesActual}" />
						<ui:param name="ano" value="#{procesoEstimacionFlujoCajaConsolidadorRevisarMonitoreoController.anoActual}" />
						<ui:param name="numMesActual" value="#{procesoEstimacionFlujoCajaConsolidadorRevisarMonitoreoController.numMesActual}" />
						<p:tabView id="tabView">
							<p:tab id="tab1" title="Programas de Reforzamiento">
								<p:tabView>
									<p:tab title="Subtítulo 21" id="tabform" rendered="#{procesoEstimacionFlujoCajaConsolidadorRevisarMonitoreoController.mostrarSubtitulo21}">
										<h4>Filtros para el Monitoreo:</h4>
										
											<h:panelGrid>
												<h:outputText value="Servicio: " styleClass="inputLabel" />
												<p:selectOneMenu style="width:650px;" id="cbServicio21" value="#{procesoEstimacionFlujoCajaConsolidadorRevisarMonitoreoController.valorComboServiciosSubtitulo21}">
												    <f:selectItem itemLabel="Seleccione" itemValue="0" />
			           								<f:selectItems value="#{procesoEstimacionFlujoCajaConsolidadorRevisarMonitoreoController.programa.servicios}" itemLabel="#{servicio.nombre_servicio}" itemValue="#{servicio.id_servicio}" var="servicio" />
			           								<p:ajax listener="#{procesoEstimacionFlujoCajaConsolidadorRevisarMonitoreoController.filtrarTotalServiciosMarcosPresupuestariosSubtitulo21}" update=":form" />
			           	 						</p:selectOneMenu>
											</h:panelGrid>
										
										<h4>Monitoreo Mes de #{mes}</h4>
										<h:panelGrid>
											
											<h:form id="formSubtitulo21">
											
											
												<p:dataTable resizableColumns="true" value="#{procesoEstimacionFlujoCajaConsolidadorRevisarMonitoreoController.monitoreoSubtitulo21FlujoCajaVO}" liveResize="true"
													var="_data" rows="10" paginator="false" paginatorPosition="bottom" emptyMessage="No se encontro información." 
													styleClass="dataTable" id="tabladatos">

													<p:columnGroup type="header">
														<p:row>
															<p:column rowspan="3" headerText="Servicio" />
															<p:column
																colspan="#{fn:length(procesoEstimacionFlujoCajaConsolidadorRevisarMonitoreoController.columns) + 5}"
																styleClass="textoPequenio"
																headerText="Subtítulo 21 (Cuota #{mes} #{ano})" />
															<p:column rowspan="3" headerText="Total" />
														</p:row>
														<p:row>
															<p:column rowspan="2" headerText="Marco Presup." />
															<p:column colspan="2"
																headerText="Transf. Acum. a la Fecha" width="200" />
															<p:column colspan="2" headerText="Convenios Rec." />

															<c:forEach items="#{procesoEstimacionFlujoCajaConsolidadorRevisarMonitoreoController.columns}" var="dynamicColumn">
																<p:column headerText="#{dynamicColumn.header}" />
															</c:forEach>
														</p:row>
														<p:row>
															<p:column headerText="Monto" />
															<p:column headerText="%" />
															<p:column headerText="Monto" />
															<p:column headerText="%" />
															<c:forEach items="#{procesoEstimacionFlujoCajaConsolidadorRevisarMonitoreoController.columns}" var="dynamicColumn">
																<p:column headerText="#{dynamicColumn.property}" />
															</c:forEach>
														</p:row>

													</p:columnGroup>

													<p:column>
														<span class="textoAjustado textoPequenio centrado">#{_data.servicio}</span>
													</p:column>
													<p:column>
														<h:outputText value="#{_data.marcoPresupuestario}" styleClass="textoPequenio textoAjustado">
															<f:convertNumber type="currency" maxFractionDigits="0" locale="es_CL" currencySymbol="$" />
														</h:outputText>
													</p:column>

													<p:column>
														<h:outputText value="#{_data.transferenciaAcumulada.monto}" styleClass="textoPequenio textoAjustado">
															<f:convertNumber type="currency" maxFractionDigits="0" locale="es_CL" currencySymbol="$" />
														</h:outputText>
													</p:column>
													<p:column>
														<h:outputText class="textoAjustado textoPequenio centrado" value="#{_data.transferenciaAcumulada.porcentaje}">
															<f:convertNumber type="percent" />
														</h:outputText>
													</p:column>

													<p:column>
														<h:outputText value="#{_data.convenioRecibido.monto}" styleClass="textoPequenio textoAjustado">
															<f:convertNumber type="currency" maxFractionDigits="0" locale="es_CL" currencySymbol="$" />
														</h:outputText>
													</p:column>
													<p:column>
														<h:outputText class="textoAjustado textoPequenio centrado" value="#{_data.convenioRecibido.porcentaje}">
															<f:convertNumber type="percent" />
														</h:outputText>
													</p:column>


													<c:forEach items="#{procesoEstimacionFlujoCajaConsolidadorRevisarMonitoreoController.cajaMontosMonitoreoSubtitulo21Local}" var="monto">
														<c:if test="#{monto.idMes ge numMesActual}">
														<p:column>
																<c:if test="#{monto.idMes eq numMesActual}">
																<h:outputText value="#{monto.montoMes}" styleClass="textoPequenio textoAjustado">
																	<f:convertNumber type="currency" maxFractionDigits="0" locale="es_CL" currencySymbol="$" />
																</h:outputText>
																</c:if>
																<c:if test="#{monto.idMes gt numMesActual}">
																	<p:inputText value="#{monto.montoMes}" style="width:100%" label="#{monto.nombreMes}" />
																</c:if>
														</p:column>
														</c:if>
													</c:forEach>


													<p:column style="background-color:#{_data.color};">
														<h:outputText value="#{_data.totalMontos}" styleClass="textoPequenio textoAjustado">
															<f:convertNumber type="currency" maxFractionDigits="0" locale="es_CL" currencySymbol="$" />
														</h:outputText>
													</p:column>

													<p:columnGroup type="footer">
														<p:row>
															<p:column />
															<p:column>
																<f:facet name="footer">
																	<h:outputText value="#{procesoEstimacionFlujoCajaConsolidadorRevisarMonitoreoController.totalServiciosMarcosPresupuestariosSubtitulo21}" styleClass="textoAjustado textoPequenio centrado">
																		<f:convertNumber type="currency" maxFractionDigits="0" locale="es_CL" currencySymbol="$" />
																	</h:outputText>
																</f:facet>
															</p:column>

															<p:column>
																<f:facet name="footer">
																	<h:outputText value="#{procesoEstimacionFlujoCajaConsolidadorRevisarMonitoreoController.totalServiciosMontosTransferenciasAcumuladasSubtitulo21}" styleClass="textoAjustado textoPequenio centrado">
																		<f:convertNumber type="currency" maxFractionDigits="0" locale="es_CL" currencySymbol="$" />
																	</h:outputText>
																</f:facet>
															</p:column>
															<p:column></p:column>
															<p:column>
																<f:facet name="footer">
																	<h:outputText value="#{procesoEstimacionFlujoCajaConsolidadorRevisarMonitoreoController.totalServiciosMontosConveniosSubtitulo21}"	styleClass="textoAjustado textoPequenio centrado">
																		<f:convertNumber type="currency" maxFractionDigits="0" locale="es_CL" currencySymbol="$" />
																	</h:outputText>
																</f:facet>
															</p:column>
															<p:column></p:column>

															<c:forEach items="#{procesoEstimacionFlujoCajaConsolidadorRevisarMonitoreoController.totalServiciosMontosMesSubtitulo21}" var="montosMes" varStatus="status">
																<c:if test="#{status.count ge numMesActual}">
																	<p:column>
																		<f:facet name="footer">
																			<h:outputText value="#{montosMes}" styleClass="textoAjustado textoPequenio centrado">
																				<f:convertNumber type="currency" maxFractionDigits="0" locale="es_CL" currencySymbol="$" />
																			</h:outputText>
																		</f:facet>
																	</p:column>
																</c:if>
															</c:forEach>
															<p:column>
																<f:facet name="footer">
																	<h:outputText value="#{procesoEstimacionFlujoCajaConsolidadorRevisarMonitoreoController.totalMontosMensualesServicioSubtitulo21}" styleClass="textoAjustado textoPequenio centrado">
																		<f:convertNumber type="currency" maxFractionDigits="0" locale="es_CL" currencySymbol="$" />
																	</h:outputText>
																</f:facet>
															</p:column>
														</p:row>
													</p:columnGroup>
												</p:dataTable>
											</h:form>
											<br />
											<h:panelGrid columns="2">

												<h:graphicImage value="resources/minsal/images/search.png"
													styleClass="divapIcons" />
												<p:lightBox iframe="true" width="1400px">
													<h:outputLink
														value="http://localhost:8080/BDT-web/divapProcesoProgProgramasMonitoreados.jsf">
														<f:param name="programa"
															value="#{procesoEstimacionFlujoCajaConsolidadorRevisarMonitoreoController.programa.idProgramaAno}" />
													Ver Detalle por Componente
													</h:outputLink>


												</p:lightBox>
											</h:panelGrid>
											<p:commandButton styleClass="x-btn-text" icon="ui-icon-disk"
												action="#{procesoEstimacionFlujoCajaConsolidadorRevisarMonitoreoController.guardarSubtitulo21}"
												ajax="true" value="Guardar" />
										</h:panelGrid>

									</p:tab>
						
									<p:tab title="Subtítulo 22" id="tabform22" rendered="#{procesoEstimacionFlujoCajaConsolidadorRevisarMonitoreoController.mostrarSubtitulo22}">

										<h4>Monitoreo Mes de #{mes}</h4>
										<h:panelGrid>
											<h:form id="form3">
												<p:dataTable resizableColumns="true" value="#{procesoEstimacionFlujoCajaConsolidadorRevisarMonitoreoController.monitoreoSubtitulo22FlujoCajaVO}" liveResize="true"
													var="_data" rows="10" paginator="false" paginatorPosition="bottom" emptyMessage="No se encontro información."
													styleClass="dataTable" id="tablaSubtitulo22">

													<p:columnGroup type="header">
														<p:row>
															<p:column rowspan="3" headerText="Servicio" />
															<p:column
																colspan="#{fn:length(procesoEstimacionFlujoCajaConsolidadorRevisarMonitoreoController.columns) + 5}"
																styleClass="textoPequenio"
																headerText="Subtítulo 22 (Cuota #{mes} #{ano})" />
															<p:column rowspan="3" headerText="Total" />
														</p:row>
														<p:row>
															<p:column rowspan="2" headerText="Marco Presup." />
															<p:column colspan="2"
																headerText="Transf. Acum. a la Fecha" width="200" />
															<p:column colspan="2" headerText="Convenios Rec." />
															<!-- Columna de meses dinámicas  -->
															<c:forEach
																items="#{procesoEstimacionFlujoCajaConsolidadorRevisarMonitoreoController.columns}"
																var="dynamicColumn">
																<p:column headerText="#{dynamicColumn.header}" />
															</c:forEach>
														</p:row>
														<p:row>
														<p:column headerText="Monto" />
															<p:column headerText="%" />
															<p:column headerText="Monto" />
															<p:column headerText="%" />
															<c:forEach
																items="#{procesoEstimacionFlujoCajaConsolidadorRevisarMonitoreoController.columns}"
																var="dynamicColumn">
																<p:column headerText="#{dynamicColumn.property}" />
															</c:forEach>
														</p:row>

													</p:columnGroup>

													<p:column>
														<span class="textoAjustado textoPequenio centrado">#{_data.servicio}</span>
													</p:column>
													<p:column>
														<h:outputText value="#{_data.marcoPresupuestario}"
															styleClass="textoPequenio textoAjustado">
															<f:convertNumber type="currency" maxFractionDigits="0"
																locale="es_CL" currencySymbol="$" />
														</h:outputText>
													</p:column>

													<p:column>
														<h:outputText value="#{_data.transferenciaAcumulada.monto}"
															styleClass="textoPequenio textoAjustado">
															<f:convertNumber type="currency" maxFractionDigits="0"
																locale="es_CL" currencySymbol="$" />
														</h:outputText>
													</p:column>
													<p:column>
														<h:outputText class="textoAjustado textoPequenio centrado" value="#{_data.transferenciaAcumulada.porcentaje}">
															<f:convertNumber type="percent" />
														</h:outputText>
													</p:column>
													<p:column>
														<h:outputText value="#{_data.convenioRecibido.monto}"
															styleClass="textoPequenio textoAjustado">
															<f:convertNumber type="currency" maxFractionDigits="0"
																locale="es_CL" currencySymbol="$" />
														</h:outputText>
													</p:column>
													<p:column>
														<h:outputText class="textoAjustado textoPequenio centrado" value="#{_data.convenioRecibido.porcentaje}">
															<f:convertNumber type="percent" />
														</h:outputText>
													</p:column>

													<c:forEach items="#{procesoEstimacionFlujoCajaConsolidadorRevisarMonitoreoController.cajaMontosMonitoreoSubtitulo22Local}" var="monto">
														<c:if test="#{monto.idMes ge numMesActual}">
														<p:column>
																<c:if test="#{monto.idMes eq numMesActual}">
																<h:outputText value="#{monto.montoMes}" styleClass="textoPequenio textoAjustado">
																	<f:convertNumber type="currency" maxFractionDigits="0" locale="es_CL" currencySymbol="$" />
																</h:outputText>
																</c:if>
																<c:if test="#{monto.idMes gt numMesActual}">
																	<p:inputText value="#{monto.montoMes}" style="width:100%" label="#{monto.nombreMes}" />
																</c:if>
														</p:column>
														</c:if>
													</c:forEach>



													<p:column style="background-color:#{_data.color};">
														<h:outputText value="#{_data.totalMontos}"
															styleClass="textoPequenio textoAjustado">
															<f:convertNumber type="currency" maxFractionDigits="0"
																locale="es_CL" currencySymbol="$" />
														</h:outputText>
													</p:column>

													<p:columnGroup type="footer">
														<p:row>
															<p:column />
															<p:column>
																<f:facet name="footer">
																	<h:outputText
																		value="#{procesoEstimacionFlujoCajaConsolidadorRevisarMonitoreoController.totalServiciosMarcosPresupuestariosSubtitulo22}"
																		styleClass="textoAjustado textoPequenio centrado">
																		<f:convertNumber type="currency" maxFractionDigits="0"
																			locale="es_CL" currencySymbol="$" />
																	</h:outputText>
																</f:facet>
															</p:column>
															<p:column>
																<f:facet name="footer">
																	<h:outputText
																		value="#{procesoEstimacionFlujoCajaConsolidadorRevisarMonitoreoController.totalServiciosMontosTransferenciasAcumuladasSubtitulo22}"
																		styleClass="textoAjustado textoPequenio centrado">
																		<f:convertNumber type="currency" maxFractionDigits="0"
																			locale="es_CL" currencySymbol="$" />
																	</h:outputText>
																</f:facet>
															</p:column>
															<p:column />
															<p:column>
																<f:facet name="footer">
																	<h:outputText
																		value="#{procesoEstimacionFlujoCajaConsolidadorRevisarMonitoreoController.totalServiciosMontosConveniosSubtitulo22}"
																		styleClass="textoAjustado textoPequenio centrado">
																		<f:convertNumber type="currency" maxFractionDigits="0"
																			locale="es_CL" currencySymbol="$" />
																	</h:outputText>
																</f:facet>
															</p:column>
															<p:column />
															<c:forEach
																items="#{procesoEstimacionFlujoCajaConsolidadorRevisarMonitoreoController.totalServiciosMontosMesSubtitulo22}" var="montosMes" varStatus="status">
																<c:if test="#{status.count gt numMesActual}">
																<p:column>
																	<f:facet name="footer">
																		<h:outputText
																			value="#{montosMes}"
																			styleClass="textoAjustado textoPequenio centrado">
																			<f:convertNumber type="currency"
																				maxFractionDigits="0" locale="es_CL"
																				currencySymbol="$" />
																		</h:outputText>
																	</f:facet>
																</p:column>
																</c:if>
															</c:forEach>
															<p:column>
																<f:facet name="footer">
																	<h:outputText value="#{procesoEstimacionFlujoCajaConsolidadorRevisarMonitoreoController.totalMontosMensualesServicioSubtitulo22}"
																		styleClass="textoAjustado textoPequenio centrado">
																		<f:convertNumber type="currency" maxFractionDigits="0"
																			locale="es_CL" currencySymbol="$" />
																	</h:outputText>
																</f:facet>
															</p:column>
														</p:row>
													</p:columnGroup>

												</p:dataTable>
											</h:form>
											<br />
											<h:panelGrid columns="2">

												<h:graphicImage value="resources/minsal/images/search.png"
													styleClass="divapIcons" />
												<p:lightBox iframe="true" width="1400px">
													<h:outputLink
														value="http://localhost:8080/BDT-web/divapProcesoProgComponentesPrograma.jsf">
														<f:param name="programa"
															value="#{procesoEstimacionFlujoCajaConsolidadorRevisarMonitoreoController.programa.idProgramaAno}" />
														<f:param name="subtitulo" value="22" />
								Ver Detalle por Componente
								</h:outputLink>


												</p:lightBox>
											</h:panelGrid>

											<p:commandButton styleClass="x-btn-text" icon="ui-icon-disk"
												action="#{procesoEstimacionFlujoCajaConsolidadorRevisarMonitoreoController.guardarSubtitulo22}"
												ajax="true" value="Guardar" />

										</h:panelGrid>

									</p:tab>
									
									<p:tab title="Subtítulo 24"
										rendered="#{procesoEstimacionFlujoCajaConsolidadorRevisarMonitoreoController.mostrarSubtitulo24}">
										
										<h4>Monitoreo Mes de #{mes}</h4>
										<h:panelGrid>
											<h:form id="formSubtitulo24">
												<p:dataTable resizableColumns="true"
													value="#{procesoEstimacionFlujoCajaConsolidadorRevisarMonitoreoController.monitoreoSubtitulo24FlujoCajaVO}" liveResize="true"
													var="_data" rows="10" paginator="false"
													paginatorPosition="bottom"
													emptyMessage="No se encontro información."
													styleClass="dataTable" editable="true" editMode="cell"
													id="tablaSubtitulo24">
 

													<p:columnGroup type="header">
														<p:row>
															<p:column rowspan="3" headerText="Servicio" />
															<p:column
																colspan="#{fn:length(procesoEstimacionFlujoCajaConsolidadorRevisarMonitoreoController.columns) + 5}"
																styleClass="textoPequenio"
																headerText="Subtítulo 24 (Cuota #{mes} #{ano})" />
															<p:column rowspan="3" headerText="Total" />
														</p:row>
														<p:row>
															<p:column rowspan="2" headerText="Marco Presup." />
															<p:column colspan="2"
																headerText="Transf. Acum. a la Fecha" width="200" />
															<p:column rowspan="2" headerText="Convenios Rec." />
															<!-- Columna de meses dinámicas  -->
															<c:forEach
																items="#{procesoEstimacionFlujoCajaConsolidadorRevisarMonitoreoController.columns}"
																var="dynamicColumn">
																<p:column headerText="#{dynamicColumn.header}" />
															</c:forEach>
														</p:row>>
														<p:row>
															<p:column headerText="Monto" />
															<p:column headerText="%" />
															<p:column headerText="Monto" />
															<p:column headerText="%" />
															<c:forEach
																items="#{procesoEstimacionFlujoCajaConsolidadorRevisarMonitoreoController.columns}"
																var="dynamicColumn">
																<p:column headerText="#{dynamicColumn.property}" />
															</c:forEach>
														</p:row>

													</p:columnGroup>

													<p:column>
														<span class="textoAjustado textoPequenio centrado">#{_data.servicio}</span>
													</p:column>
													<p:column>
														<h:outputText value="#{_data.marcoPresupuestario}"
															styleClass="textoPequenio textoAjustado">
															<f:convertNumber type="currency" maxFractionDigits="0"
																locale="es_CL" currencySymbol="$" />
														</h:outputText>
													</p:column>

													<p:column>
														<h:outputText value="#{_data.transferenciaAcumulada.monto}"
															styleClass="textoPequenio textoAjustado">
															<f:convertNumber type="currency" maxFractionDigits="0"
																locale="es_CL" currencySymbol="$" />
														</h:outputText>
													</p:column>
													<p:column>
														<h:outputText value="#{_data.transferenciaAcumulada.porcentaje}"
															styleClass="textoPequenio textoAjustado">
															<f:convertNumber type="currency" maxFractionDigits="0"
																locale="es_CL" currencySymbol="$" />
														</h:outputText>
													</p:column>
													<p:column>
														<h:outputText value="#{_data.convenioRecibido.monto}" styleClass="textoPequenio textoAjustado">
															<f:convertNumber type="currency" maxFractionDigits="0" locale="es_CL" currencySymbol="$" />
														</h:outputText>
													</p:column>
													<p:column>
														<h:outputText class="textoAjustado textoPequenio centrado" value="#{_data.convenioRecibido.porcentaje}">
															<f:convertNumber type="percent" />
														</h:outputText>
													</p:column>

													<c:forEach items="#{procesoEstimacionFlujoCajaConsolidadorRevisarMonitoreoController.cajaMontosMonitoreoSubtitulo24Local}" var="monto">
														<c:if test="#{monto.idMes ge numMesActual}">
														<p:column>
															<c:if test="#{monto.idMes eq numMesActual}">
															<h:outputText value="#{monto.montoMes}" styleClass="textoPequenio textoAjustado">
																<f:convertNumber type="currency" maxFractionDigits="0" locale="es_CL" currencySymbol="$" />
															</h:outputText>
															</c:if>
															<c:if test="#{monto.idMes gt numMesActual}">
																<p:inputText value="#{monto.montoMes}" style="width:100%" label="#{monto.nombreMes}" />
															</c:if>
														</p:column>
														</c:if>
													</c:forEach>



													<p:column style="background-color:#{_data.color};">
														<h:outputText value="#{_data.totalMontos}"
															styleClass="textoPequenio textoAjustado">
															<f:convertNumber type="currency" maxFractionDigits="0"
																locale="es_CL" currencySymbol="$" />
														</h:outputText>
													</p:column>

													<p:columnGroup type="footer">
														<p:row>
															<p:column />
															<p:column>
																<f:facet name="footer">
																	<h:outputText
																		value="#{procesoEstimacionFlujoCajaConsolidadorRevisarMonitoreoController.totalServiciosMarcosPresupuestariosSubtitulo24}"
																		styleClass="textoAjustado textoPequenio centrado">
																		<f:convertNumber type="currency" maxFractionDigits="0"
																			locale="es_CL" currencySymbol="$" />
																	</h:outputText>
																</f:facet>
															</p:column>
															<p:column>
																<f:facet name="footer">
																	<h:outputText
																		value="#{procesoEstimacionFlujoCajaConsolidadorRevisarMonitoreoController.totalServiciosMontosTransferenciasAcumuladasSubtitulo24}"
																		styleClass="textoAjustado textoPequenio centrado">
																		<f:convertNumber type="currency" maxFractionDigits="0"
																			locale="es_CL" currencySymbol="$" />
																	</h:outputText>
																</f:facet>
															</p:column>
															<p:column />
															<p:column>
																<f:facet name="footer">
																	<h:outputText
																		value="#{procesoEstimacionFlujoCajaConsolidadorRevisarMonitoreoController.totalServiciosMontosConveniosSubtitulo24}"
																		styleClass="textoAjustado textoPequenio centrado">
																		<f:convertNumber type="currency" maxFractionDigits="0"
																			locale="es_CL" currencySymbol="$" />
																	</h:outputText>
																</f:facet>
															</p:column>
															<p:column />
															<c:forEach
																items="#{procesoEstimacionFlujoCajaConsolidadorRevisarMonitoreoController.totalServiciosMontosMesSubtitulo24}"
																var="montosMes" varStatus="status">
																<c:if test="#{status.count ge numMesActual}">
																<p:column>
																	<f:facet name="footer">
																		<h:outputText
																			value="#{montosMes}"
																			styleClass="textoAjustado textoPequenio centrado">
																			<f:convertNumber type="currency"
																				maxFractionDigits="0" locale="es_CL"
																				currencySymbol="$" />
																		</h:outputText>
																	</f:facet>
																</p:column>
																</c:if>
															</c:forEach>
															<p:column>
																<f:facet name="footer">
																	<h:outputText value="#{procesoEstimacionFlujoCajaConsolidadorRevisarMonitoreoController.totalMontosMensualesServicioSubtitulo24}"
																		styleClass="textoAjustado textoPequenio centrado">
																		<f:convertNumber type="currency" maxFractionDigits="0"
																			locale="es_CL" currencySymbol="$" />
																	</h:outputText>
																</f:facet>
															</p:column>
														</p:row>
													</p:columnGroup>

												</p:dataTable>
											</h:form>
											<br/>
											<h:panelGrid columns="2">

												<h:graphicImage value="resources/minsal/images/search.png"
													styleClass="divapIcons" />
												<p:lightBox iframe="true" width="1400px">
													<h:outputLink
														value="http://localhost:8080/BDT-web/divapProcesoProgComponentesPrograma.jsf">
														<f:param name="programa"
															value="#{procesoEstimacionFlujoCajaConsolidadorRevisarMonitoreoController.programa.idProgramaAno}" />
														<f:param name="subtitulo" value="24" />
								Ver Detalle por Componente
								</h:outputLink>


												</p:lightBox>
											</h:panelGrid>

											<p:commandButton styleClass="x-btn-text" icon="ui-icon-disk"
												action="#{procesoEstimacionFlujoCajaConsolidadorRevisarMonitoreoController.guardarSubtitulo24}"
												ajax="true" value="Guardar" />

										</h:panelGrid>

									</p:tab>
									
									<p:tab title="Subtítulo 29"	rendered="#{procesoEstimacionFlujoCajaConsolidadorRevisarMonitoreoController.mostrarSubtitulo29}">
										
											<h4>Monitoreo Mes de #{mes}</h4>
											<h:panelGrid>

												 
												<h:form id="formSubtitulo29">
												<p:dataTable resizableColumns="true"
													value="#{procesoEstimacionFlujoCajaConsolidadorRevisarMonitoreoController.monitoreoSubtitulo29FlujoCajaVO}" liveResize="true"
													var="_data" rows="10" paginator="false"
													paginatorPosition="bottom"
													emptyMessage="No se encontro información."
													styleClass="dataTable" editable="true" editMode="cell"
													id="tablaSubtitulo22">

													<p:columnGroup type="header">
														<p:row>
															<p:column rowspan="3" headerText="Servicio" />
															<p:column
																colspan="#{fn:length(procesoEstimacionFlujoCajaConsolidadorRevisarMonitoreoController.columns) + 5}"
																styleClass="textoPequenio"
																headerText="Subtítulo 29 (Cuota #{mes} #{ano})" />
															<p:column rowspan="3" headerText="Total" />
														</p:row>
														<p:row>
															<p:column rowspan="2" headerText="Marco Presup." />
															<p:column colspan="2"
																headerText="Transf. Acum. a la Fecha" width="200" />
															<p:column colspan="2" headerText="Convenios Rec." />

															<c:forEach
																items="#{procesoEstimacionFlujoCajaConsolidadorRevisarMonitoreoController.columns}"
																var="dynamicColumn">
																<p:column headerText="#{dynamicColumn.header}" />
															</c:forEach>
														</p:row>
														<p:row>
															<p:column headerText="Monto" />
															<p:column headerText="%" />
															<p:column headerText="Monto" />
															<p:column headerText="%" />

															<c:forEach
																items="#{procesoEstimacionFlujoCajaConsolidadorRevisarMonitoreoController.columns}"
																var="dynamicColumn">
																<p:column headerText="#{dynamicColumn.property}" />
															</c:forEach>
														</p:row>

													</p:columnGroup>

													<p:column>
														<span class="textoAjustado textoPequenio centrado">#{_data.servicio}</span>
													</p:column>
													<p:column>
														<h:outputText value="#{_data.marcoPresupuestario}"
															styleClass="textoPequenio textoAjustado">
															<f:convertNumber type="currency" maxFractionDigits="0"
																locale="es_CL" currencySymbol="$" />
														</h:outputText>
													</p:column>

													<p:column>
														<h:outputText value="#{_data.transferenciaAcumulada.monto}"
															styleClass="textoPequenio textoAjustado">
															<f:convertNumber type="currency" maxFractionDigits="0"
																locale="es_CL" currencySymbol="$" />
														</h:outputText>
													</p:column>
													
													<p:column>
														<h:outputText class="textoAjustado textoPequenio centrado" value="#{_data.transferenciaAcumulada.porcentaje}">
															<f:convertNumber type="percent" />
														</h:outputText>
													</p:column>
													
													<p:column>
														<h:outputText value="#{_data.convenioRecibido.monto}" styleClass="textoPequenio textoAjustado">
															<f:convertNumber type="currency" maxFractionDigits="0" locale="es_CL" currencySymbol="$" />
														</h:outputText>
													</p:column>
													
													<p:column>
														<h:outputText class="textoAjustado textoPequenio centrado" value="#{_data.convenioRecibido.porcentaje}">
															<f:convertNumber type="percent" />
														</h:outputText>
													</p:column>
													
													<c:forEach items="#{procesoEstimacionFlujoCajaConsolidadorRevisarMonitoreoController.cajaMontosMonitoreoSubtitulo29Local}" var="monto">
														<c:if test="#{monto.idMes ge numMesActual}">
														<p:column>
															<c:if test="#{monto.idMes == numMesActual}">
															<h:outputText value="#{monto.montoMes}" styleClass="textoPequenio textoAjustado">
																<f:convertNumber type="currency" maxFractionDigits="0" locale="es_CL" currencySymbol="$" />
															</h:outputText>
															</c:if>
															<c:if test="#{monto.idMes > numMesActual}">
																<p:inputText value="#{monto.montoMes}" style="width:100%" label="#{monto.nombreMes}" />
															</c:if>
														</p:column>
														</c:if>
													</c:forEach>



													<p:column style="background-color:#{_data.color};">
														<h:outputText value="#{_data.totalMontos}"
															styleClass="textoPequenio textoAjustado">
															<f:convertNumber type="currency" maxFractionDigits="0"
																locale="es_CL" currencySymbol="$" />
														</h:outputText>
													</p:column>

													<p:columnGroup type="footer">
														<p:row>
															<p:column />
															<p:column>
																<f:facet name="footer">
																	<h:outputText
																		value="#{procesoEstimacionFlujoCajaConsolidadorRevisarMonitoreoController.totalServiciosMarcosPresupuestariosSubtitulo29}"
																		styleClass="textoAjustado textoPequenio centrado">
																		<f:convertNumber type="currency" maxFractionDigits="0"
																			locale="es_CL" currencySymbol="$" />
																	</h:outputText>
																</f:facet>
															</p:column>
															<p:column>
																<f:facet name="footer">
																	<h:outputText
																		value="#{procesoEstimacionFlujoCajaConsolidadorRevisarMonitoreoController.totalServiciosMontosTransferenciasAcumuladasSubtitulo29}"
																		styleClass="textoAjustado textoPequenio centrado">
																		<f:convertNumber type="currency" maxFractionDigits="0"
																			locale="es_CL" currencySymbol="$" />
																	</h:outputText>
																</f:facet>
															</p:column>
															<p:column />
															<p:column>
																<f:facet name="footer">
																	<h:outputText
																		value="#{procesoEstimacionFlujoCajaConsolidadorRevisarMonitoreoController.totalServiciosMontosConveniosSubtitulo29}"
																		styleClass="textoAjustado textoPequenio centrado">
																		<f:convertNumber type="currency" maxFractionDigits="0"
																			locale="es_CL" currencySymbol="$" />
																	</h:outputText>
																</f:facet>
															</p:column>
															<p:column />
															<c:forEach
																items="#{procesoEstimacionFlujoCajaConsolidadorRevisarMonitoreoController.totalServiciosMontosMesSubtitulo29}" var="montosMes" varStatus="status">
																<c:if test="#{status.count ge numMesActual}">
																	<p:column>
																		<f:facet name="footer">
																			<h:outputText
																				value="#{montosMes}"
																				styleClass="textoAjustado textoPequenio centrado">
																				<f:convertNumber type="currency"
																					maxFractionDigits="0" locale="es_CL"
																					currencySymbol="$" />
																			</h:outputText>
																		</f:facet>
																	</p:column>
																</c:if>
															</c:forEach>

															<p:column>
																<f:facet name="footer">
																	<h:outputText value="#{procesoEstimacionFlujoCajaConsolidadorRevisarMonitoreoController.totalMontosMensualesServicioSubtitulo29}"
																		styleClass="textoAjustado textoPequenio centrado">
																		<f:convertNumber type="currency" maxFractionDigits="0"
																			locale="es_CL" currencySymbol="$" />
																	</h:outputText>
																</f:facet>
															</p:column>
														</p:row>
													</p:columnGroup>

												</p:dataTable>
												</h:form>
												<br />
												<h:panelGrid columns="2">

													<h:graphicImage value="resources/minsal/images/search.png"
														styleClass="divapIcons" />
													<p:lightBox iframe="true" width="1400px">
														<h:outputLink
															value="http://localhost:8080/BDT-web/divapProcesoProgComponentesPrograma.jsf">
															<f:param name="programa"
																value="#{procesoEstimacionFlujoCajaConsolidadorRevisarMonitoreoController.programa.idProgramaAno}" />
															<f:param name="subtitulo" value="29" />
								Ver Detalle por Componente
								</h:outputLink>


													</p:lightBox>
												</h:panelGrid>
												<p:commandButton styleClass="x-btn-text" icon="ui-icon-disk"
													action="#{procesoEstimacionFlujoCajaConsolidadorRevisarMonitoreoController.guardarSubtitulo29}"
													ajax="true" value="Guardar" />

											</h:panelGrid>
										
									</p:tab>
									
								</p:tabView>

							</p:tab>
							
							
							<p:tab title="Per Cápita" id="tabform" rendered="#{procesoEstimacionFlujoCajaConsolidadorRevisarMonitoreoController.mostrarPercapita}">
										<h4>Filtros para el Monitoreo:</h4>
										
											<!--h:panelGrid>
												<h:outputText value="Servicio: " styleClass="inputLabel" />
												<p:selectOneMenu style="width:650px;" id="cbServicio21" value="#{procesoEstimacionFlujoCajaConsolidadorRevisarMonitoreoController.valorComboServiciosSubtitulo21}">
												    <f:selectItem itemLabel="Seleccione" itemValue="0" />
			           								<f:selectItems value="#{procesoEstimacionFlujoCajaConsolidadorRevisarMonitoreoController.programa.servicios}" itemLabel="#{servicio.nombre_servicio}" itemValue="#{servicio.id_servicio}" var="servicio" />
			           								<p:ajax listener="#{procesoEstimacionFlujoCajaConsolidadorRevisarMonitoreoController.filtrarTotalServiciosMarcosPresupuestariosSubtitulo21}" update=":form" />
			           	 						</p:selectOneMenu>
											</h:panelGrid-->
										
										<h4>Monitoreo Mes de #{mes}</h4>
										<h:panelGrid>
											
											<h:form id="formPercapita">
											
											
												<p:dataTable resizableColumns="true" value="#{procesoEstimacionFlujoCajaConsolidadorRevisarMonitoreoController.monitoreoPercapitaFlujoCajaVO}" liveResize="true"
													var="_data" rows="10" paginator="false" paginatorPosition="bottom" emptyMessage="No se encontro información." 
													styleClass="dataTable" id="tabladatos">

													<p:columnGroup type="header">
														<p:row>
															<p:column rowspan="2" headerText="Servicio" />
															<p:column rowspan="1" colspan="12" styleClass="textoPequenio" headerText="REMESA PER CÁPITA"/>
															<p:column rowspan="2" headerText="TOTAL PER CÁPITA" />	
																																											
														</p:row>
														
														<p:row>
															<p:column rowspan="1" headerText="Enero" />
															<p:column rowspan="1" headerText="Febrero" />
															<p:column rowspan="1" headerText="Marzo" />
															<p:column rowspan="1" headerText="Abril" />
															<p:column rowspan="1" headerText="Mayo" />
															<p:column rowspan="1" headerText="Junio" />
															<p:column rowspan="1" headerText="Julio" />
															<p:column rowspan="1" headerText="Agosto" />
															<p:column rowspan="1" headerText="Septiembre" />
															<p:column rowspan="1" headerText="Octubre" />
															<p:column rowspan="1" headerText="Noviembre" />
															<p:column rowspan="1" headerText="Diciembre" />		
														</p:row>
														

													</p:columnGroup>

													<p:column>
														<span class="textoAjustado textoPequenio centrado">#{_data.servicio}</span>
													</p:column>

													<c:forEach items="#{procesoEstimacionFlujoCajaConsolidadorRevisarMonitoreoController.cajaMontosMonitoreoPercapitaLocal}" var="monto">
														<p:column>
																<h:outputText value="#{_data.totalMontos/12}" styleClass="textoPequenio textoAjustado">
																	<f:convertNumber type="currency" maxFractionDigits="0" locale="es_CL" currencySymbol="$" />
																</h:outputText>
														</p:column>
													</c:forEach>
													<p:column style="background-color:#{_data.color};">
														<h:outputText value="#{_data.totalMontos}" styleClass="textoPequenio textoAjustado">
															<f:convertNumber type="currency" maxFractionDigits="0" locale="es_CL" currencySymbol="$" />
														</h:outputText>
													</p:column>

												
												<p:columnGroup type="footer">
														<p:row>
															<p:column>
																<f:facet name="footer">
																	<h:outputText value="Total" styleClass="textoAjustado textoPequenio centrado">
																	</h:outputText>
																</f:facet>
															</p:column>
															<c:forEach items="#{procesoEstimacionFlujoCajaConsolidadorRevisarMonitoreoController.totalServiciosMontosMesPercapita}" var="montosMes" varStatus="status">
																<p:column>
																	<f:facet name="footer">
																		<h:outputText value="#{montosMes}" styleClass="textoAjustado textoPequenio centrado">
																			<f:convertNumber type="currency" maxFractionDigits="0" locale="es_CL" currencySymbol="$" />
																		</h:outputText>
																	</f:facet>
																</p:column>
															</c:forEach>															
															<p:column>
																<f:facet name="footer">
																	<h:outputText value="#{procesoEstimacionFlujoCajaConsolidadorRevisarMonitoreoController.totalFinalServiciosPercapita}" styleClass="textoAjustado textoPequenio centrado">
																		<f:convertNumber type="currency" maxFractionDigits="0" locale="es_CL" currencySymbol="$" />
																	</h:outputText>
																</f:facet>
															</p:column>
														</p:row>
													</p:columnGroup>
													
													
												</p:dataTable>
											</h:form>
											<br />
											<h:panelGrid columns="2">

												<h:graphicImage value="resources/minsal/images/search.png"
													styleClass="divapIcons" />
												<p:lightBox iframe="true" width="1400px">
													<h:outputLink
														value="http://localhost:8080/BDT-web/divapProcesoProgProgramasMonitoreados.jsf">
														<f:param name="programa"
															value="#{procesoEstimacionFlujoCajaConsolidadorRevisarMonitoreoController.programa.idProgramaAno}" />
													Ver Detalle por Componente
													</h:outputLink>


												</p:lightBox>
											</h:panelGrid>
											<p:commandButton styleClass="x-btn-text" icon="ui-icon-disk"
												action="#{procesoEstimacionFlujoCajaConsolidadorRevisarMonitoreoController.guardarSubtitulo21}"
												ajax="true" value="Guardar" />
										</h:panelGrid>

									</p:tab>

							
						</p:tabView>

						<p:commandButton value="Todos los Programas Ingresados | Iniciar Seguimiento Ordinarios"
							styleClass="x-btn-text"
							action="#{procesoEstimacionFlujoCajaConsolidadorRevisarMonitoreoController.finalizar}"
							ajax="false" icon="ui-icon-seek-first" />
							
						<p:commandButton value="Reparos"
							styleClass="x-btn-text"
							action="#{procesoEstimacionFlujoCajaConsolidadorRevisarMonitoreoController.conReparos}"
							ajax="false" icon="ui-icon-seek-first" />
					</div>

				</p:panel>





				<p:commandButton value="Volver" styleClass="x-btn-text"
					action="bandejaTareas?faces-redirect=true indexMenu=0" ajax="false"
					icon="ui-icon-seek-first" />
			</p:panel>
		</h:form>
	</ui:define>
</ui:composition>