<?xml version="1.0" encoding="UTF-8"?>
<ui:composition xmlns="http://www.w3.org/1999/xhtml" 
	xmlns:ui="http://java.sun.com/jsf/facelets" 
	xmlns:f="http://java.sun.com/jsf/core"
	xmlns:h="http://java.sun.com/jsf/html" 
	xmlns:p="http://primefaces.org/ui" 
	xmlns:c="http://java.sun.com/jsp/jstl/core"
	xmlns:fn="http://java.sun.com/jsp/jstl/functions" 
	template="/WEB-INF/templates/default.xhtml">

	<ui:define name="content">
		<h:form enctype="multipart/form-data">
			<p:panel styleClass="contentPanel">
				<h1>
					<h:outputText value="Estimación de Flujos de Caja" />
				</h1>
				<p:panel id="Panel">
					<h2>Consolidado de Revisión y Validación de Monitoreos por Programa</h2>
					<p class="parrafo">Lorem ipsum dolor sit amet, consectetur adipiscing elit. Praesent egestas tempor nulla eget ultricies. Morbi
						pulvinar elit at justo pharetra, vitae ultricies est dignissim, justo nisi porttitor enim, eget ullamcorper felis augue eget lacus.</p>
					<br />

					<h:panelGrid columns="2">
						<h:graphicImage value="resources/minsal/images/search.png" styleClass="divapIcons" />
						<p:lightBox iframe="true" width="950px">
							<h:outputLink value="http://localhost:8080/BDT-web/divapProcesoProgProgramasMonitoreados.jsf">Ver estado revisión y validación monitoreo programas.</h:outputLink>
						</p:lightBox>
					</h:panelGrid>
					<br />

					<!-- ARCHIVOS DE TAREA -->
					<h3>Archivos disponibles para la Tarea:</h3>
					<div class="destacaArchivos ui-corner-all">
						<ul class="versionesArchivo">
							<li><h:graphicImage value="resources/minsal/images/download-alt.png" styleClass="divapIcons" /> <p:commandLink
									value="Planilla completa actualizada de Programacion de Caja.xls" /></li>
							<li><h:graphicImage value="resources/minsal/images/download-alt.png" styleClass="divapIcons" /> <p:commandLink
									value="Planilla Programacion de Caja - propuesta mes Julio.xls" /></li>
						</ul>
					</div>
					<br />
	<h:form id="prueba"></h:form>
					<div id="tablaSubtitulos" style="display: block;">
						<p:tabView>
					
							<p:tab title="Subtítulo 21">
				
							<h:form id="formSubtitulo21">
								<h4>Filtros para el Monitoreo:</h4>
								<h:panelGrid>
									<h:panelGrid>
										<h:outputText value="Programa: " styleClass="inputLabel" />
										
										<p:selectOneMenu style="width:650px;" id="cbPrograma21" value="#{procesoEstimacionFlujoCajaConsolidadorRevisarConsolidacionController.valorComboProgramaSubtitulo21}">
									    <f:selectItem itemLabel="Seleccione" itemValue="" />
           								 <f:selectItems value="#{procesoEstimacionFlujoCajaConsolidadorRevisarConsolidacionController.programas21}" />
           								 <!-- <p:ajax listener="#{procesoEstimacionFlujoCajaConsolidadorRevisarConsolidacionController.filtrarSubtitulo21}"	update=":#{p:component('formSubtitulo21')}" /> -->
           								  <p:ajax listener="#{procesoEstimacionFlujoCajaConsolidadorRevisarConsolidacionController.cargarServicios21}"	update=":#{p:component('formSubtitulo21')}" />
           	 							</p:selectOneMenu>
      
									</h:panelGrid>
								</h:panelGrid>
								<h:panelGrid>
									<h:outputText value="Servicio: " styleClass="inputLabel" />
									<p:selectOneMenu style="width:650px;" id="cbServicio21" value="#{procesoEstimacionFlujoCajaConsolidadorRevisarConsolidacionController.valorComboServicioSubtitulo21}">
									    <f:selectItem itemLabel="Seleccione" itemValue="" />
           								 <f:selectItems value="#{procesoEstimacionFlujoCajaConsolidadorRevisarConsolidacionController.servicios21}" />
           								  <p:ajax listener="#{procesoEstimacionFlujoCajaConsolidadorRevisarConsolidacionController.cargarComunas21}"	update=":#{p:component('formSubtitulo21')}" />
           	 							  <p:ajax 	update=":#{p:component('formSubtitulo21')}" />
           	 							</p:selectOneMenu>
								</h:panelGrid>
								<h:panelGrid>
									<h:outputText value="Comuna: " styleClass="inputLabel" />
									<p:selectOneMenu style="width:650px;" id="cbComunas21" value="#{procesoEstimacionFlujoCajaConsolidadorRevisarConsolidacionController.valorComboComunaSubtitulo21}">
									    <f:selectItem itemLabel="Seleccione" itemValue="" />
           								 <f:selectItems value="#{procesoEstimacionFlujoCajaConsolidadorRevisarConsolidacionController.comunas21}" />
           								<!--   <p:ajax listener="#{procesoEstimacionFlujoCajaConsolidadorRevisarConsolidacionController.cargarComunas}"	update=":#{p:component('formSubtitulo21')}" />
           	 					 -->		
           	 					   <p:ajax 	update=":#{p:component('formSubtitulo21')}" />
           	 							</p:selectOneMenu>
								</h:panelGrid>
						
								
							
											<h4>Monitoreo Mes de #{mes}</h4>
											<h:panelGrid>
								
								<ui:param name="datoSubtitulo21" value="#{procesoEstimacionFlujoCajaConsolidadorRevisarConsolidacionController.cajaGlobalVOSubtitulo21}" />
											
									<p:dataTable resizableColumns="true"
													value="#{datoSubtitulo21.caja}"
													liveResize="true" var="_data" rows="10" paginator="false"
													paginatorPosition="bottom"
													emptyMessage="No se encontro información."
													styleClass="dataTable" editable="true" editMode="cell"
													id="tablaSubtitulo21">

													<p:ajax event="cellEdit"
														listener="#{procesoEstimacionFlujoCajaConsolidadorRevisarConsolidacionController.onCellEditSubtitulo21}"
														update=":#{p:component('formSubtitulo21')}" />

													<p:columnGroup type="header">
														<p:row>
															<p:column rowspan="3" headerText="Establecimiento" />
															<p:column
																colspan="#{fn:length(procesoEstimacionFlujoCajaConsolidadorRevisarConsolidacionController.columns) + 3}"
																styleClass="textoPequenio"
																headerText="Subtítulo 22 (Cuota #{mes} #{ano})" />
															<p:column rowspan="3" headerText="Total" />
														</p:row>
														<p:row>
															<p:column rowspan="2" headerText="Marco Presup." />
															<p:column rowspan="2"
																headerText="Transf. Acum. a la Fecha" width="200" />
															<p:column rowspan="2" headerText="Convenios Rec." />
															<!-- Columna de meses dinámicas  -->
															<c:forEach
																items="#{procesoEstimacionFlujoCajaConsolidadorRevisarConsolidacionController.columns}"
																var="dynamicColumn">
																<p:column headerText="#{dynamicColumn.header}" />
															</c:forEach>
														</p:row>>
														<p:row>
															<c:forEach
																items="#{procesoEstimacionFlujoCajaConsolidadorRevisarConsolidacionController.columns}"
																var="dynamicColumn">
																<p:column headerText="#{dynamicColumn.property}" />
															</c:forEach>
														</p:row>

													</p:columnGroup>

													<p:column>
														<span class="textoAjustado textoPequenio centrado">#{_data.establecimiento}</span>
													</p:column>
													<p:column>
														<h:outputText value="#{_data.marcoMonto}"
															styleClass="textoPequenio textoAjustado">
															<f:convertNumber type="currency" maxFractionDigits="0"
																locale="es_CL" currencySymbol="$" />
														</h:outputText>
													</p:column>

													<p:column>
														<h:outputText value="#{_data.transferenciaMonto}"
															styleClass="textoPequenio textoAjustado">
															<f:convertNumber type="currency" maxFractionDigits="0"
																locale="es_CL" currencySymbol="$" />
														</h:outputText>
													</p:column>
													<p:column>
														<h:outputText value="#{_data.convenioMonto}"
															styleClass="textoPequenio textoAjustado">
															<f:convertNumber type="currency" maxFractionDigits="0"
																locale="es_CL" currencySymbol="$" />
														</h:outputText>
													</p:column>



													<c:forEach items="#{procesoEstimacionFlujoCajaConsolidadorRevisarConsolidacionController.columns}"
														var="dynamicColumn">
														<p:column>
															<p:cellEditor>
																<f:facet name="output">
																	<h:outputText
																		value="#{_data[dynamicColumn.nombreColumna]}"
																		styleClass="textoPequenio textoAjustado">
																		<f:convertNumber type="currency" maxFractionDigits="0"
																			locale="es_CL" currencySymbol="$" />
																	</h:outputText>
																</f:facet>
																<f:facet name="input">
																	<p:inputText
																		value="#{_data[dynamicColumn.nombreColumna]}"
																		style="width:100%"
																		label="#{dynamicColumn.nombreColumna}" />


																</f:facet>
															</p:cellEditor>
														</p:column>
													</c:forEach>



													<p:column style="background-color:#{_data.color};">
														<h:outputText value="#{_data.total}"
															styleClass="textoPequenio textoAjustado">
															<f:convertNumber type="currency" maxFractionDigits="0"
																locale="es_CL" currencySymbol="$" />
														</h:outputText>
													</p:column>

													<p:columnGroup type="footer">
														<p:row>
															<p:column />
															<p:column>
																<f:facet name="footer">
																	<h:outputText
																		value="#{datoSubtitulo21.totalMarcoMonto}"
																		styleClass="textoAjustado textoPequenio centrado">
																		<f:convertNumber type="currency" maxFractionDigits="0"
																			locale="es_CL" currencySymbol="$" />
																	</h:outputText>
																</f:facet>
															</p:column>
															<p:column>
																<f:facet name="footer">
																	<h:outputText
																		value="#{datoSubtitulo21.totalTransferenciaMonto}"
																		styleClass="textoAjustado textoPequenio centrado">
																		<f:convertNumber type="currency" maxFractionDigits="0"
																			locale="es_CL" currencySymbol="$" />
																	</h:outputText>
																</f:facet>
															</p:column>
															<p:column>
																<f:facet name="footer">
																	<h:outputText
																		value="#{datoSubtitulo21.totalConvenioMonto}"
																		styleClass="textoAjustado textoPequenio centrado">
																		<f:convertNumber type="currency" maxFractionDigits="0"
																			locale="es_CL" currencySymbol="$" />
																	</h:outputText>
																</f:facet>
															</p:column>

															<c:forEach
																items="#{procesoEstimacionFlujoCajaConsolidadorRevisarConsolidacionController.columns}"
																var="dynamicColumn">
																<p:column>
																	<f:facet name="footer">
																		<h:outputText
																			value="#{datoSubtitulo21[dynamicColumn.nombreColumna]}"
																			styleClass="textoAjustado textoPequenio centrado">
																			<f:convertNumber type="currency"
																				maxFractionDigits="0" locale="es_CL"
																				currencySymbol="$" />
																		</h:outputText>
																	</f:facet>
																</p:column>
															</c:forEach>
															<p:column>
																<f:facet name="footer">
																	<h:outputText value="#{datoSubtitulo21.total}"
																		styleClass="textoAjustado textoPequenio centrado">
																		<f:convertNumber type="currency" maxFractionDigits="0"
																			locale="es_CL" currencySymbol="$" />
																	</h:outputText>
																</f:facet>
															</p:column>
														</p:row>
													</p:columnGroup>

												</p:dataTable>


								</h:panelGrid>
								</h:form>
						
							</p:tab>
							<p:tab title="Subtítulo 22">
								<h4>Filtros para el Monitoreo:</h4>
								<h:form id="formSubtitulo22">
								<h:panelGrid>
										<h:outputText value="Programa: " styleClass="inputLabel" />
										
										<p:selectOneMenu style="width:650px;" id="cbPrograma22" value="#{procesoEstimacionFlujoCajaConsolidadorRevisarConsolidacionController.valorComboProgramaSubtitulo22}">
									    <f:selectItem itemLabel="Seleccione" itemValue="" />
           								 <f:selectItems value="#{procesoEstimacionFlujoCajaConsolidadorRevisarConsolidacionController.programas22}" />
           								 <!-- <p:ajax listener="#{procesoEstimacionFlujoCajaConsolidadorRevisarConsolidacionController.filtrarSubtitulo21}"	update=":#{p:component('formSubtitulo21')}" /> -->
           								  <p:ajax listener="#{procesoEstimacionFlujoCajaConsolidadorRevisarConsolidacionController.cargarServicios22}"	update=":#{p:component('formSubtitulo22')}" />
           	 							</p:selectOneMenu>
      
									</h:panelGrid>
								
								<h:panelGrid>
									<h:outputText value="Servicio: " styleClass="inputLabel" />
									<p:selectOneMenu style="width:650px;" id="cbServicio22" value="#{procesoEstimacionFlujoCajaConsolidadorRevisarConsolidacionController.valorComboServicioSubtitulo22}">
									    <f:selectItem itemLabel="Seleccione" itemValue="" />
           								 <f:selectItems value="#{procesoEstimacionFlujoCajaConsolidadorRevisarConsolidacionController.servicios22}" />
           								  <p:ajax listener="#{procesoEstimacionFlujoCajaConsolidadorRevisarConsolidacionController.cargarComunas22}"	update=":#{p:component('formSubtitulo22')}" />
           	 							  <p:ajax 	update=":#{p:component('formSubtitulo22')}" />
           	 							</p:selectOneMenu>
								</h:panelGrid>
								<h:panelGrid>
									<h:outputText value="Comuna: " styleClass="inputLabel" />
									<p:selectOneMenu style="width:650px;" id="cbComunas22" value="#{procesoEstimacionFlujoCajaConsolidadorRevisarConsolidacionController.valorComboComunaSubtitulo22}">
									    <f:selectItem itemLabel="Seleccione" itemValue="" />
           								 <f:selectItems value="#{procesoEstimacionFlujoCajaConsolidadorRevisarConsolidacionController.comunas22}" />
           								<!--   <p:ajax listener="#{procesoEstimacionFlujoCajaConsolidadorRevisarConsolidacionController.cargarComunas}"	update=":#{p:component('formSubtitulo21')}" />
           	 					 -->		
           	 					   <p:ajax 	update=":#{p:component('formSubtitulo22')}" />
           	 							</p:selectOneMenu>
								</h:panelGrid>
								<br />
								
											<h4>Monitoreo Mes de #{mes}</h4>
											<h:panelGrid>
								
								<ui:param name="datoSubtitulo22" value="#{procesoEstimacionFlujoCajaConsolidadorRevisarConsolidacionController.cajaGlobalVOSubtitulo22}" />
											
									<p:dataTable resizableColumns="true"
													value="#{datoSubtitulo22.caja}"
													liveResize="true" var="_data" rows="10" paginator="false"
													paginatorPosition="bottom"
													emptyMessage="No se encontro información."
													styleClass="dataTable" editable="true" editMode="cell"
													id="tablaSubtitulo22">

													<p:ajax event="cellEdit"
														listener="#{procesoEstimacionFlujoCajaConsolidadorRevisarConsolidacionController.onCellEditSubtitulo22}"
														update=":#{p:component('formSubtitulo22')}" />

													<p:columnGroup type="header">
														<p:row>
															<p:column rowspan="3" headerText="Establecimiento" />
															<p:column
																colspan="#{fn:length(procesoEstimacionFlujoCajaConsolidadorRevisarConsolidacionController.columns) + 3}"
																styleClass="textoPequenio"
																headerText="Subtítulo 22 (Cuota #{mes} #{ano})" />
															<p:column rowspan="3" headerText="Total" />
														</p:row>
														<p:row>
															<p:column rowspan="2" headerText="Marco Presup." />
															<p:column rowspan="2"
																headerText="Transf. Acum. a la Fecha" width="200" />
															<p:column rowspan="2" headerText="Convenios Rec." />
															<!-- Columna de meses dinámicas  -->
															<c:forEach
																items="#{procesoEstimacionFlujoCajaConsolidadorRevisarConsolidacionController.columns}"
																var="dynamicColumn">
																<p:column headerText="#{dynamicColumn.header}" />
															</c:forEach>
														</p:row>>
														<p:row>
															<c:forEach
																items="#{procesoEstimacionFlujoCajaConsolidadorRevisarConsolidacionController.columns}"
																var="dynamicColumn">
																<p:column headerText="#{dynamicColumn.property}" />
															</c:forEach>
														</p:row>

													</p:columnGroup>

													<p:column>
														<span class="textoAjustado textoPequenio centrado">#{_data.establecimiento}</span>
													</p:column>
													<p:column>
														<h:outputText value="#{_data.marcoMonto}"
															styleClass="textoPequenio textoAjustado">
															<f:convertNumber type="currency" maxFractionDigits="0"
																locale="es_CL" currencySymbol="$" />
														</h:outputText>
													</p:column>

													<p:column>
														<h:outputText value="#{_data.transferenciaMonto}"
															styleClass="textoPequenio textoAjustado">
															<f:convertNumber type="currency" maxFractionDigits="0"
																locale="es_CL" currencySymbol="$" />
														</h:outputText>
													</p:column>
													<p:column>
														<h:outputText value="#{_data.convenioMonto}"
															styleClass="textoPequenio textoAjustado">
															<f:convertNumber type="currency" maxFractionDigits="0"
																locale="es_CL" currencySymbol="$" />
														</h:outputText>
													</p:column>



													<c:forEach items="#{procesoEstimacionFlujoCajaConsolidadorRevisarConsolidacionController.columns}"
														var="dynamicColumn">
														<p:column>
															<p:cellEditor>
																<f:facet name="output">
																	<h:outputText
																		value="#{_data[dynamicColumn.nombreColumna]}"
																		styleClass="textoPequenio textoAjustado">
																		<f:convertNumber type="currency" maxFractionDigits="0"
																			locale="es_CL" currencySymbol="$" />
																	</h:outputText>
																</f:facet>
																<f:facet name="input">
																	<p:inputText
																		value="#{_data[dynamicColumn.nombreColumna]}"
																		style="width:100%"
																		label="#{dynamicColumn.nombreColumna}" />


																</f:facet>
															</p:cellEditor>
														</p:column>
													</c:forEach>



													<p:column style="background-color:#{_data.color};">
														<h:outputText value="#{_data.total}"
															styleClass="textoPequenio textoAjustado">
															<f:convertNumber type="currency" maxFractionDigits="0"
																locale="es_CL" currencySymbol="$" />
														</h:outputText>
													</p:column>

													<p:columnGroup type="footer">
														<p:row>
															<p:column />
															<p:column>
																<f:facet name="footer">
																	<h:outputText
																		value="#{datoSubtitulo22.totalMarcoMonto}"
																		styleClass="textoAjustado textoPequenio centrado">
																		<f:convertNumber type="currency" maxFractionDigits="0"
																			locale="es_CL" currencySymbol="$" />
																	</h:outputText>
																</f:facet>
															</p:column>
															<p:column>
																<f:facet name="footer">
																	<h:outputText
																		value="#{datoSubtitulo22.totalTransferenciaMonto}"
																		styleClass="textoAjustado textoPequenio centrado">
																		<f:convertNumber type="currency" maxFractionDigits="0"
																			locale="es_CL" currencySymbol="$" />
																	</h:outputText>
																</f:facet>
															</p:column>
															<p:column>
																<f:facet name="footer">
																	<h:outputText
																		value="#{datoSubtitulo22.totalConvenioMonto}"
																		styleClass="textoAjustado textoPequenio centrado">
																		<f:convertNumber type="currency" maxFractionDigits="0"
																			locale="es_CL" currencySymbol="$" />
																	</h:outputText>
																</f:facet>
															</p:column>

															<c:forEach
																items="#{procesoEstimacionFlujoCajaConsolidadorRevisarConsolidacionController.columns}"
																var="dynamicColumn">
																<p:column>
																	<f:facet name="footer">
																		<h:outputText
																			value="#{datoSubtitulo22[dynamicColumn.nombreColumna]}"
																			styleClass="textoAjustado textoPequenio centrado">
																			<f:convertNumber type="currency"
																				maxFractionDigits="0" locale="es_CL"
																				currencySymbol="$" />
																		</h:outputText>
																	</f:facet>
																</p:column>
															</c:forEach>
															<p:column>
																<f:facet name="footer">
																	<h:outputText value="#{datoSubtitulo22.total}"
																		styleClass="textoAjustado textoPequenio centrado">
																		<f:convertNumber type="currency" maxFractionDigits="0"
																			locale="es_CL" currencySymbol="$" />
																	</h:outputText>
																</f:facet>
															</p:column>
														</p:row>
													</p:columnGroup>

												</p:dataTable>


								</h:panelGrid>
								</h:form>
							</p:tab>
							<p:tab title="Subtítulo 24">
								<h4>Filtros para el Monitoreo:</h4>
								<h:form id="formSubtitulo24">
														<h:panelGrid>
										<h:outputText value="Programa: " styleClass="inputLabel" />
										
										<p:selectOneMenu style="width:650px;" id="cbPrograma24" value="#{procesoEstimacionFlujoCajaConsolidadorRevisarConsolidacionController.valorComboProgramaSubtitulo24}">
									    <f:selectItem itemLabel="Seleccione" itemValue="" />
           								 <f:selectItems value="#{procesoEstimacionFlujoCajaConsolidadorRevisarConsolidacionController.programas24}" />
           								 <!-- <p:ajax listener="#{procesoEstimacionFlujoCajaConsolidadorRevisarConsolidacionController.filtrarSubtitulo21}"	update=":#{p:component('formSubtitulo21')}" /> -->
           								  <p:ajax listener="#{procesoEstimacionFlujoCajaConsolidadorRevisarConsolidacionController.cargarServicios24}"	update=":#{p:component('formSubtitulo24')}" />
           	 							</p:selectOneMenu>
      
									</h:panelGrid>
								
								<h:panelGrid>
									<h:outputText value="Servicio: " styleClass="inputLabel" />
									<p:selectOneMenu style="width:650px;" id="cbServicio24" value="#{procesoEstimacionFlujoCajaConsolidadorRevisarConsolidacionController.valorComboServicioSubtitulo24}">
									    <f:selectItem itemLabel="Seleccione" itemValue="" />
           								 <f:selectItems value="#{procesoEstimacionFlujoCajaConsolidadorRevisarConsolidacionController.servicios24}" />
           								  <p:ajax listener="#{procesoEstimacionFlujoCajaConsolidadorRevisarConsolidacionController.cargarComunas24}"	update=":#{p:component('formSubtitulo24')}" />
           	 							  <p:ajax 	update=":#{p:component('formSubtitulo24')}" />
           	 							</p:selectOneMenu>
								</h:panelGrid>
								<h:panelGrid>
									<h:outputText value="Comuna: " styleClass="inputLabel" />
									<p:selectOneMenu style="width:650px;" id="cbComunas24" value="#{procesoEstimacionFlujoCajaConsolidadorRevisarConsolidacionController.valorComboComunaSubtitulo24}">
									    <f:selectItem itemLabel="Seleccione" itemValue="" />
           								 <f:selectItems value="#{procesoEstimacionFlujoCajaConsolidadorRevisarConsolidacionController.comunas24}" />
           								<!--   <p:ajax listener="#{procesoEstimacionFlujoCajaConsolidadorRevisarConsolidacionController.cargarComunas}"	update=":#{p:component('formSubtitulo21')}" />
           	 					 -->		
           	 					   <p:ajax 	update=":#{p:component('formSubtitulo24')}" />
           	 							</p:selectOneMenu>
								</h:panelGrid>
								<br />
								
											<h4>Monitoreo Mes de #{mes}</h4>
											<h:panelGrid>
								
								<ui:param name="datoSubtitulo24" value="#{procesoEstimacionFlujoCajaConsolidadorRevisarConsolidacionController.cajaGlobalVOSubtitulo24}" />
											
									<p:dataTable resizableColumns="true"
													value="#{datoSubtitulo24.caja}"
													liveResize="true" var="_data" rows="10" paginator="false"
													paginatorPosition="bottom"
													emptyMessage="No se encontro información."
													styleClass="dataTable" editable="true" editMode="cell"
													id="tablaSubtitulo24">

													<p:ajax event="cellEdit"
														listener="#{procesoEstimacionFlujoCajaConsolidadorRevisarConsolidacionController.onCellEditSubtitulo24}"
														update=":#{p:component('formSubtitulo24')}" />

													<p:columnGroup type="header">
														<p:row>
															<p:column rowspan="3" headerText="Establecimiento" />
															<p:column
																colspan="#{fn:length(procesoEstimacionFlujoCajaConsolidadorRevisarConsolidacionController.columns) + 3}"
																styleClass="textoPequenio"
																headerText="Subtítulo 24 (Cuota #{mes} #{ano})" />
															<p:column rowspan="3" headerText="Total" />
														</p:row>
														<p:row>
															<p:column rowspan="2" headerText="Marco Presup." />
															<p:column rowspan="2"
																headerText="Transf. Acum. a la Fecha" width="200" />
															<p:column rowspan="2" headerText="Convenios Rec." />
															<!-- Columna de meses dinámicas  -->
															<c:forEach
																items="#{procesoEstimacionFlujoCajaConsolidadorRevisarConsolidacionController.columns}"
																var="dynamicColumn">
																<p:column headerText="#{dynamicColumn.header}" />
															</c:forEach>
														</p:row>>
														<p:row>
															<c:forEach
																items="#{procesoEstimacionFlujoCajaConsolidadorRevisarConsolidacionController.columns}"
																var="dynamicColumn">
																<p:column headerText="#{dynamicColumn.property}" />
															</c:forEach>
														</p:row>

													</p:columnGroup>

													<p:column>
														<span class="textoAjustado textoPequenio centrado">#{_data.establecimiento}</span>
													</p:column>
													<p:column>
														<h:outputText value="#{_data.marcoMonto}"
															styleClass="textoPequenio textoAjustado">
															<f:convertNumber type="currency" maxFractionDigits="0"
																locale="es_CL" currencySymbol="$" />
														</h:outputText>
													</p:column>

													<p:column>
														<h:outputText value="#{_data.transferenciaMonto}"
															styleClass="textoPequenio textoAjustado">
															<f:convertNumber type="currency" maxFractionDigits="0"
																locale="es_CL" currencySymbol="$" />
														</h:outputText>
													</p:column>
													<p:column>
														<h:outputText value="#{_data.convenioMonto}"
															styleClass="textoPequenio textoAjustado">
															<f:convertNumber type="currency" maxFractionDigits="0"
																locale="es_CL" currencySymbol="$" />
														</h:outputText>
													</p:column>



													<c:forEach items="#{procesoEstimacionFlujoCajaConsolidadorRevisarConsolidacionController.columns}"
														var="dynamicColumn">
														<p:column>
															<p:cellEditor>
																<f:facet name="output">
																	<h:outputText
																		value="#{_data[dynamicColumn.nombreColumna]}"
																		styleClass="textoPequenio textoAjustado">
																		<f:convertNumber type="currency" maxFractionDigits="0"
																			locale="es_CL" currencySymbol="$" />
																	</h:outputText>
																</f:facet>
																<f:facet name="input">
																	<p:inputText
																		value="#{_data[dynamicColumn.nombreColumna]}"
																		style="width:100%"
																		label="#{dynamicColumn.nombreColumna}" />


																</f:facet>
															</p:cellEditor>
														</p:column>
													</c:forEach>



													<p:column style="background-color:#{_data.color};">
														<h:outputText value="#{_data.total}"
															styleClass="textoPequenio textoAjustado">
															<f:convertNumber type="currency" maxFractionDigits="0"
																locale="es_CL" currencySymbol="$" />
														</h:outputText>
													</p:column>

													<p:columnGroup type="footer">
														<p:row>
															<p:column />
															<p:column>
																<f:facet name="footer">
																	<h:outputText
																		value="#{datoSubtitulo24.totalMarcoMonto}"
																		styleClass="textoAjustado textoPequenio centrado">
																		<f:convertNumber type="currency" maxFractionDigits="0"
																			locale="es_CL" currencySymbol="$" />
																	</h:outputText>
																</f:facet>
															</p:column>
															<p:column>
																<f:facet name="footer">
																	<h:outputText
																		value="#{datoSubtitulo24.totalTransferenciaMonto}"
																		styleClass="textoAjustado textoPequenio centrado">
																		<f:convertNumber type="currency" maxFractionDigits="0"
																			locale="es_CL" currencySymbol="$" />
																	</h:outputText>
																</f:facet>
															</p:column>
															<p:column>
																<f:facet name="footer">
																	<h:outputText
																		value="#{datoSubtitulo24.totalConvenioMonto}"
																		styleClass="textoAjustado textoPequenio centrado">
																		<f:convertNumber type="currency" maxFractionDigits="0"
																			locale="es_CL" currencySymbol="$" />
																	</h:outputText>
																</f:facet>
															</p:column>

															<c:forEach
																items="#{procesoEstimacionFlujoCajaConsolidadorRevisarConsolidacionController.columns}"
																var="dynamicColumn">
																<p:column>
																	<f:facet name="footer">
																		<h:outputText
																			value="#{datoSubtitulo24[dynamicColumn.nombreColumna]}"
																			styleClass="textoAjustado textoPequenio centrado">
																			<f:convertNumber type="currency"
																				maxFractionDigits="0" locale="es_CL"
																				currencySymbol="$" />
																		</h:outputText>
																	</f:facet>
																</p:column>
															</c:forEach>
															<p:column>
																<f:facet name="footer">
																	<h:outputText value="#{datoSubtitulo24.total}"
																		styleClass="textoAjustado textoPequenio centrado">
																		<f:convertNumber type="currency" maxFractionDigits="0"
																			locale="es_CL" currencySymbol="$" />
																	</h:outputText>
																</f:facet>
															</p:column>
														</p:row>
													</p:columnGroup>

												</p:dataTable>


								</h:panelGrid>
								</h:form>
							</p:tab>
							<p:tab title="Subtítulo 29">
								<h4>Filtros para el Monitoreo:</h4>
								<h:form id="formSubtitulo29">
								<h:panelGrid>
										<h:outputText value="Programa: " styleClass="inputLabel" />
										
										<p:selectOneMenu style="width:650px;" id="cbPrograma29" value="#{procesoEstimacionFlujoCajaConsolidadorRevisarConsolidacionController.valorComboProgramaSubtitulo29}">
									    <f:selectItem itemLabel="Seleccione" itemValue="" />
           								 <f:selectItems value="#{procesoEstimacionFlujoCajaConsolidadorRevisarConsolidacionController.programas29}" />
           								 <!-- <p:ajax listener="#{procesoEstimacionFlujoCajaConsolidadorRevisarConsolidacionController.filtrarSubtitulo21}"	update=":#{p:component('formSubtitulo21')}" /> -->
           								  <p:ajax listener="#{procesoEstimacionFlujoCajaConsolidadorRevisarConsolidacionController.cargarServicios29}"	update=":#{p:component('formSubtitulo29')}" />
           	 							</p:selectOneMenu>
      
									</h:panelGrid>
							
								<h:panelGrid>
									<h:outputText value="Servicio: " styleClass="inputLabel" />
									<p:selectOneMenu style="width:650px;" id="cbServicio29" value="#{procesoEstimacionFlujoCajaConsolidadorRevisarConsolidacionController.valorComboServicioSubtitulo29}">
									    <f:selectItem itemLabel="Seleccione" itemValue="" />
           								 <f:selectItems value="#{procesoEstimacionFlujoCajaConsolidadorRevisarConsolidacionController.servicios29}" />
           								  <p:ajax listener="#{procesoEstimacionFlujoCajaConsolidadorRevisarConsolidacionController.cargarComunas29}"	update=":#{p:component('formSubtitulo29')}" />
           	 							  <p:ajax 	update=":#{p:component('formSubtitulo29')}" />
           	 							</p:selectOneMenu>
								</h:panelGrid>
								<h:panelGrid>
									<h:outputText value="Comuna: " styleClass="inputLabel" />
									<p:selectOneMenu style="width:650px;" id="cbComunas29" value="#{procesoEstimacionFlujoCajaConsolidadorRevisarConsolidacionController.valorComboComunaSubtitulo29}">
									    <f:selectItem itemLabel="Seleccione" itemValue="" />
           								 <f:selectItems value="#{procesoEstimacionFlujoCajaConsolidadorRevisarConsolidacionController.comunas29}" />
           								<!--   <p:ajax listener="#{procesoEstimacionFlujoCajaConsolidadorRevisarConsolidacionController.cargarComunas}"	update=":#{p:component('formSubtitulo21')}" />
           	 					 -->		
           	 					   <p:ajax 	update=":#{p:component('formSubtitulo29')}" />
           	 							</p:selectOneMenu>
								</h:panelGrid>
								<br />
								
											<h4>Monitoreo Mes de #{mes}</h4>
											<h:panelGrid>
								
								<ui:param name="datoSubtitulo29" value="#{procesoEstimacionFlujoCajaConsolidadorRevisarConsolidacionController.cajaGlobalVOSubtitulo29}" />
											
									<p:dataTable resizableColumns="true"
													value="#{datoSubtitulo29.caja}"
													liveResize="true" var="_data" rows="10" paginator="false"
													paginatorPosition="bottom"
													emptyMessage="No se encontro información."
													styleClass="dataTable" editable="true" editMode="cell"
													id="tablaSubtitulo29">

													<p:ajax event="cellEdit"
														listener="#{procesoEstimacionFlujoCajaConsolidadorRevisarConsolidacionController.onCellEditSubtitulo29}"
														update=":#{p:component('formSubtitulo29')}" />

													<p:columnGroup type="header">
														<p:row>
															<p:column rowspan="3" headerText="Establecimiento" />
															<p:column
																colspan="#{fn:length(procesoEstimacionFlujoCajaConsolidadorRevisarConsolidacionController.columns) + 3}"
																styleClass="textoPequenio"
																headerText="Subtítulo 29 (Cuota #{mes} #{ano})" />
															<p:column rowspan="3" headerText="Total" />
														</p:row>
														<p:row>
															<p:column rowspan="2" headerText="Marco Presup." />
															<p:column rowspan="2"
																headerText="Transf. Acum. a la Fecha" width="200" />
															<p:column rowspan="2" headerText="Convenios Rec." />
															<!-- Columna de meses dinámicas  -->
															<c:forEach
																items="#{procesoEstimacionFlujoCajaConsolidadorRevisarConsolidacionController.columns}"
																var="dynamicColumn">
																<p:column headerText="#{dynamicColumn.header}" />
															</c:forEach>
														</p:row>>
														<p:row>
															<c:forEach
																items="#{procesoEstimacionFlujoCajaConsolidadorRevisarConsolidacionController.columns}"
																var="dynamicColumn">
																<p:column headerText="#{dynamicColumn.property}" />
															</c:forEach>
														</p:row>

													</p:columnGroup>

													<p:column>
														<span class="textoAjustado textoPequenio centrado">#{_data.establecimiento}</span>
													</p:column>
													<p:column>
														<h:outputText value="#{_data.marcoMonto}"
															styleClass="textoPequenio textoAjustado">
															<f:convertNumber type="currency" maxFractionDigits="0"
																locale="es_CL" currencySymbol="$" />
														</h:outputText>
													</p:column>

													<p:column>
														<h:outputText value="#{_data.transferenciaMonto}"
															styleClass="textoPequenio textoAjustado">
															<f:convertNumber type="currency" maxFractionDigits="0"
																locale="es_CL" currencySymbol="$" />
														</h:outputText>
													</p:column>
													<p:column>
														<h:outputText value="#{_data.convenioMonto}"
															styleClass="textoPequenio textoAjustado">
															<f:convertNumber type="currency" maxFractionDigits="0"
																locale="es_CL" currencySymbol="$" />
														</h:outputText>
													</p:column>



													<c:forEach items="#{procesoEstimacionFlujoCajaConsolidadorRevisarConsolidacionController.columns}"
														var="dynamicColumn">
														<p:column>
															<p:cellEditor>
																<f:facet name="output">
																	<h:outputText
																		value="#{_data[dynamicColumn.nombreColumna]}"
																		styleClass="textoPequenio textoAjustado">
																		<f:convertNumber type="currency" maxFractionDigits="0"
																			locale="es_CL" currencySymbol="$" />
																	</h:outputText>
																</f:facet>
																<f:facet name="input">
																	<p:inputText
																		value="#{_data[dynamicColumn.nombreColumna]}"
																		style="width:100%"
																		label="#{dynamicColumn.nombreColumna}" />


																</f:facet>
															</p:cellEditor>
														</p:column>
													</c:forEach>



													<p:column style="background-color:#{_data.color};">
														<h:outputText value="#{_data.total}"
															styleClass="textoPequenio textoAjustado">
															<f:convertNumber type="currency" maxFractionDigits="0"
																locale="es_CL" currencySymbol="$" />
														</h:outputText>
													</p:column>

													<p:columnGroup type="footer">
														<p:row>
															<p:column />
															<p:column>
																<f:facet name="footer">
																	<h:outputText
																		value="#{datoSubtitulo29.totalMarcoMonto}"
																		styleClass="textoAjustado textoPequenio centrado">
																		<f:convertNumber type="currency" maxFractionDigits="0"
																			locale="es_CL" currencySymbol="$" />
																	</h:outputText>
																</f:facet>
															</p:column>
															<p:column>
																<f:facet name="footer">
																	<h:outputText
																		value="#{datoSubtitulo29.totalTransferenciaMonto}"
																		styleClass="textoAjustado textoPequenio centrado">
																		<f:convertNumber type="currency" maxFractionDigits="0"
																			locale="es_CL" currencySymbol="$" />
																	</h:outputText>
																</f:facet>
															</p:column>
															<p:column>
																<f:facet name="footer">
																	<h:outputText
																		value="#{datoSubtitulo29.totalConvenioMonto}"
																		styleClass="textoAjustado textoPequenio centrado">
																		<f:convertNumber type="currency" maxFractionDigits="0"
																			locale="es_CL" currencySymbol="$" />
																	</h:outputText>
																</f:facet>
															</p:column>

															<c:forEach
																items="#{procesoEstimacionFlujoCajaConsolidadorRevisarConsolidacionController.columns}"
																var="dynamicColumn">
																<p:column>
																	<f:facet name="footer">
																		<h:outputText
																			value="#{datoSubtitulo29[dynamicColumn.nombreColumna]}"
																			styleClass="textoAjustado textoPequenio centrado">
																			<f:convertNumber type="currency"
																				maxFractionDigits="0" locale="es_CL"
																				currencySymbol="$" />
																		</h:outputText>
																	</f:facet>
																</p:column>
															</c:forEach>
															<p:column>
																<f:facet name="footer">
																	<h:outputText value="#{datoSubtitulo29.total}"
																		styleClass="textoAjustado textoPequenio centrado">
																		<f:convertNumber type="currency" maxFractionDigits="0"
																			locale="es_CL" currencySymbol="$" />
																	</h:outputText>
																</f:facet>
															</p:column>
														</p:row>
													</p:columnGroup>

												</p:dataTable>


								</h:panelGrid>
								</h:form>
							</p:tab>
							<p:tab title="Per Cápita">
								<h4>Filtros para el Monitoreo:</h4>
								<h:form id="formSubtituloPerCapita">
								<h:panelGrid>
										<h:outputText value="Programa: " styleClass="inputLabel" />
										
										<p:selectOneMenu style="width:650px;" id="cbProgramaPerCapita" value="#{procesoEstimacionFlujoCajaConsolidadorRevisarConsolidacionController.valorComboProgramaSubtituloPerCapita}">
									    <f:selectItem itemLabel="Seleccione" itemValue="" />
           								 <f:selectItems value="#{procesoEstimacionFlujoCajaConsolidadorRevisarConsolidacionController.programasPerCapita}" />
           								 <!-- <p:ajax listener="#{procesoEstimacionFlujoCajaConsolidadorRevisarConsolidacionController.filtrarSubtitulo21}"	update=":#{p:component('formSubtitulo21')}" /> -->
           								  <p:ajax listener="#{procesoEstimacionFlujoCajaConsolidadorRevisarConsolidacionController.cargarServiciosPerCapita}"	update=":#{p:component('formSubtituloPerCapita')}" />
           	 							</p:selectOneMenu>
      
									</h:panelGrid>
								
								<h:panelGrid>
									<h:outputText value="Servicio: " styleClass="inputLabel" />
									<p:selectOneMenu style="width:650px;" id="cbServicioPerCapita" value="#{procesoEstimacionFlujoCajaConsolidadorRevisarConsolidacionController.valorComboServicioSubtituloPerCapita}">
									    <f:selectItem itemLabel="Seleccione" itemValue="" />
           								 <f:selectItems value="#{procesoEstimacionFlujoCajaConsolidadorRevisarConsolidacionController.serviciosPerCapita}" />
           								  <p:ajax listener="#{procesoEstimacionFlujoCajaConsolidadorRevisarConsolidacionController.cargarComunasPerCapita}"	update=":#{p:component('formSubtituloPerCapita')}" />
           	 							  <p:ajax 	update=":#{p:component('formSubtituloPerCapita')}" />
           	 							</p:selectOneMenu>
								</h:panelGrid>
								<h:panelGrid>
									<h:outputText value="Comuna: " styleClass="inputLabel" />
									<p:selectOneMenu style="width:650px;" id="cbComunasPerCapita" value="#{procesoEstimacionFlujoCajaConsolidadorRevisarConsolidacionController.valorComboComunaSubtituloPerCapita}">
									    <f:selectItem itemLabel="Seleccione" itemValue="" />
           								 <f:selectItems value="#{procesoEstimacionFlujoCajaConsolidadorRevisarConsolidacionController.comunasPerCapita}" />
           								<!--   <p:ajax listener="#{procesoEstimacionFlujoCajaConsolidadorRevisarConsolidacionController.cargarComunas}"	update=":#{p:component('formSubtitulo21')}" />
           	 					 -->		
           	 					   <p:ajax 	update=":#{p:component('formSubtituloPerCapita')}" />
           	 							</p:selectOneMenu>
								</h:panelGrid>
								<br />
								
											<h4>Monitoreo Mes de #{mes}</h4>
											<h:panelGrid>
								
								<ui:param name="datoSubtituloPerCapita" value="#{procesoEstimacionFlujoCajaConsolidadorRevisarConsolidacionController.cajaGlobalVOSubtituloPerCapita}" />
											
									<p:dataTable resizableColumns="true"
													value="#{datoSubtituloPerCapita.caja}"
													liveResize="true" var="_data" rows="10" paginator="false"
													paginatorPosition="bottom"
													emptyMessage="No se encontro información."
													styleClass="dataTable" editable="true" editMode="cell"
													id="tablaSubtitulo22">

													<p:ajax event="cellEdit"
														listener="#{procesoEstimacionFlujoCajaConsolidadorRevisarConsolidacionController.onCellEditSubtituloPerCapita}"
														update=":#{p:component('formSubtituloPerCapita')}" />

													<p:columnGroup type="header">
														<p:row>
															<p:column rowspan="3" headerText="Establecimiento" />
															<p:column
																colspan="#{fn:length(procesoEstimacionFlujoCajaConsolidadorRevisarConsolidacionController.columns) + 3}"
																styleClass="textoPequenio"
																headerText="Per Capita (Cuota #{mes} #{ano})" />
															<p:column rowspan="3" headerText="Total" />
														</p:row>
														<p:row>
															<p:column rowspan="2" headerText="Marco Presup." />
															<p:column rowspan="2"
																headerText="Transf. Acum. a la Fecha" width="200" />
															<p:column rowspan="2" headerText="Convenios Rec." />
															<!-- Columna de meses dinámicas  -->
															<c:forEach
																items="#{procesoEstimacionFlujoCajaConsolidadorRevisarConsolidacionController.columns}"
																var="dynamicColumn">
																<p:column headerText="#{dynamicColumn.header}" />
															</c:forEach>
														</p:row>>
														<p:row>
															<c:forEach
																items="#{procesoEstimacionFlujoCajaConsolidadorRevisarConsolidacionController.columns}"
																var="dynamicColumn">
																<p:column headerText="#{dynamicColumn.property}" />
															</c:forEach>
														</p:row>

													</p:columnGroup>

													<p:column>
														<span class="textoAjustado textoPequenio centrado">#{_data.establecimiento}</span>
													</p:column>
													<p:column>
														<h:outputText value="#{_data.marcoMonto}"
															styleClass="textoPequenio textoAjustado">
															<f:convertNumber type="currency" maxFractionDigits="0"
																locale="es_CL" currencySymbol="$" />
														</h:outputText>
													</p:column>

													<p:column>
														<h:outputText value="#{_data.transferenciaMonto}"
															styleClass="textoPequenio textoAjustado">
															<f:convertNumber type="currency" maxFractionDigits="0"
																locale="es_CL" currencySymbol="$" />
														</h:outputText>
													</p:column>
													<p:column>
														<h:outputText value="#{_data.convenioMonto}"
															styleClass="textoPequenio textoAjustado">
															<f:convertNumber type="currency" maxFractionDigits="0"
																locale="es_CL" currencySymbol="$" />
														</h:outputText>
													</p:column>



													<c:forEach items="#{procesoEstimacionFlujoCajaConsolidadorRevisarConsolidacionController.columns}"
														var="dynamicColumn">
														<p:column>
															<p:cellEditor>
																<f:facet name="output">
																	<h:outputText
																		value="#{_data[dynamicColumn.nombreColumna]}"
																		styleClass="textoPequenio textoAjustado">
																		<f:convertNumber type="currency" maxFractionDigits="0"
																			locale="es_CL" currencySymbol="$" />
																	</h:outputText>
																</f:facet>
																<f:facet name="input">
																	<p:inputText
																		value="#{_data[dynamicColumn.nombreColumna]}"
																		style="width:100%"
																		label="#{dynamicColumn.nombreColumna}" />


																</f:facet>
															</p:cellEditor>
														</p:column>
													</c:forEach>



													<p:column style="background-color:#{_data.color};">
														<h:outputText value="#{_data.total}"
															styleClass="textoPequenio textoAjustado">
															<f:convertNumber type="currency" maxFractionDigits="0"
																locale="es_CL" currencySymbol="$" />
														</h:outputText>
													</p:column>

													<p:columnGroup type="footer">
														<p:row>
															<p:column />
															<p:column>
																<f:facet name="footer">
																	<h:outputText
																		value="#{datoSubtituloPerCapita.totalMarcoMonto}"
																		styleClass="textoAjustado textoPequenio centrado">
																		<f:convertNumber type="currency" maxFractionDigits="0"
																			locale="es_CL" currencySymbol="$" />
																	</h:outputText>
																</f:facet>
															</p:column>
															<p:column>
																<f:facet name="footer">
																	<h:outputText
																		value="#{datoSubtituloPerCapita.totalTransferenciaMonto}"
																		styleClass="textoAjustado textoPequenio centrado">
																		<f:convertNumber type="currency" maxFractionDigits="0"
																			locale="es_CL" currencySymbol="$" />
																	</h:outputText>
																</f:facet>
															</p:column>
															<p:column>
																<f:facet name="footer">
																	<h:outputText
																		value="#{datoSubtituloPerCapita.totalConvenioMonto}"
																		styleClass="textoAjustado textoPequenio centrado">
																		<f:convertNumber type="currency" maxFractionDigits="0"
																			locale="es_CL" currencySymbol="$" />
																	</h:outputText>
																</f:facet>
															</p:column>

															<c:forEach
																items="#{procesoEstimacionFlujoCajaConsolidadorRevisarConsolidacionController.columns}"
																var="dynamicColumn">
																<p:column>
																	<f:facet name="footer">
																		<h:outputText
																			value="#{datoSubtituloPerCapita[dynamicColumn.nombreColumna]}"
																			styleClass="textoAjustado textoPequenio centrado">
																			<f:convertNumber type="currency"
																				maxFractionDigits="0" locale="es_CL"
																				currencySymbol="$" />
																		</h:outputText>
																	</f:facet>
																</p:column>
															</c:forEach>
															<p:column>
																<f:facet name="footer">
																	<h:outputText value="#{datoSubtituloPerCapita.total}"
																		styleClass="textoAjustado textoPequenio centrado">
																		<f:convertNumber type="currency" maxFractionDigits="0"
																			locale="es_CL" currencySymbol="$" />
																	</h:outputText>
																</f:facet>
															</p:column>
														</p:row>
													</p:columnGroup>

												</p:dataTable>


								</h:panelGrid>
								</h:form>
							</p:tab>
						</p:tabView>


						<p:commandButton value="Todos los Programas Ingresados | Iniciar Seguimiento Ordinarios" styleClass="x-btn-text"
							action="#{procesoEstimacionFlujoCajaConsolidadorRevisarConsolidacionController.continuarProceso}" ajax="false" icon="ui-icon-seek-first" />
					</div>

				</p:panel>

					
				<p:commandButton value="Volver" styleClass="x-btn-text" action="bandejaTareas?faces-redirect=true indexMenu=0" ajax="false"
					icon="ui-icon-seek-first" />
			</p:panel>
		</h:form>
	</ui:define>
</ui:composition>