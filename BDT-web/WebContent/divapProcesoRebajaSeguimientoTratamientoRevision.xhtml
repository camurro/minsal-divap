<?xml version="1.0" encoding="UTF-8"?>
<ui:composition xmlns="http://www.w3.org/1999/xhtml" xmlns:ui="http://java.sun.com/jsf/facelets" xmlns:f="http://java.sun.com/jsf/core"
	xmlns:h="http://java.sun.com/jsf/html" xmlns:p="http://primefaces.org/ui" template="/WEB-INF/templates/default.xhtml">

	<ui:define name="content">
		<h:form enctype="multipart/form-data">
			<p:panel styleClass="contentPanel">
				<h1>
					<h:outputText value="Rebaja" />
				</h1>
				<p:panel id="Panel">
					<h2>
						<span class="strong">Actividad:</span> Seguimiento, Tramitación y Revisión de Resoluciones
					</h2>
					<p class="parrafo">El #{procesoAsignacionPerCapitaController.actividadSeguimientoTitle} contiene lorem ipsum dolor sit amet,
						consectetur adipiscing elit. Praesent egestas tempor nulla eget ultricies. Morbi pulvinar elit Maecenas sollicitudin odio imperdiet
						orci sollicitudin convallis. Etiam hendrerit, tellus a lacinia dignissim, justo nisi porttitor enim, eget ullamcorper felis augue eget
						lacus.</p>
					<!-- ARCHIVOS DE TAREA -->
					<!-- <h3>Archivos disponibles para la Tarea:</h3> -->
					<div class="destacaArchivos ui-corner-all">
						<h3>Archivos Disponibles para la Tarea:</h3>
						<span class="strong">Archivo: </span> Consolidado de Resoluciones por Servicio [
						<h:graphicImage value="resources/minsal/images/download-alt.png" styleClass="divapIcons" />
						<p:commandLink value="Bajar Última Versión" />
						]
						<ul class="versionesArchivo">
							<li><h:graphicImage value="resources/minsal/images/download-alt.png" styleClass="divapIcons" /> <p:commandLink
									value="consolidado_resoluciones_rebaja_v2.zip" /> (Modificado el 10 de Abril de 2014 a las 14:31 por Juan Arriagada)</li>
							<li><h:graphicImage value="resources/minsal/images/download-alt.png" styleClass="divapIcons" /> <p:commandLink
									value="consolidado_resoluciones_rebaja_v1.zip" /> (Modificado el 6 de Abril de 2014 a las 14:31 por Robson Watt)</li>
						</ul>
					</div>
					<br />
					<!-- INICIO: MODAL CON INFORMACIóN Y FILTROS VISTA ONLINE -->
					<h3>Visualizador: Montos de Rebaja</h3>
					<p:panel styleClass="appMenu">
						<h4>Filtros de Búsqueda:</h4>
						<h:panelGrid columns="4" id="busqueda_mis_tareas">
							<h:panelGrid columns="2">
								<h:outputText value="Región: " styleClass="inputLabel" />
								<p:selectOneMenu>
									<f:selectItem itemLabel="METROPOLITANA" itemValue="METROPOLITANA" />
									<f:selectItem itemLabel="Seleccione" itemValue="" />
								</p:selectOneMenu>
							</h:panelGrid>

							<h:panelGrid columns="2">
								<h:outputText value="Servicio: " styleClass="inputLabel" />
								<p:selectOneMenu>
									<f:selectItem itemLabel="SANTIAGO" itemValue="SANTIAGO" />
									<f:selectItem itemLabel="Seleccione" itemValue="" />
								</p:selectOneMenu>
							</h:panelGrid>

							<h:panelGrid columns="2">
								<h:outputText value="Comuna: " styleClass="inputLabel" />
								<p:selectCheckboxMenu value="#{procesoRebajaTramitacionController.comunasSeleccionadas}" label="Seleccione" filter="true" filterText="Filter"
									filterMatchMode="startsWith">
									<f:selectItems value="#{procesoRebajaTramitacionController.comunas}" />
								</p:selectCheckboxMenu>
							</h:panelGrid>

							<h:panelGrid columns="2">
								<p:commandButton value="Buscar" styleClass=" x-btn-text icon-guardar" update="tablaMisTareas" icon="ui-icon-search" />
								<p:commandButton value="Limpiar" styleClass=" x-btn-text icon-guardar" update="tablaMisTareas" icon="ui-icon-trash" />
							</h:panelGrid>

						</h:panelGrid>
					</p:panel>
					<br />
					<p:dataTable id="tablaMisTareas" resizableColumns="true" value="#{procesoRebajaTramitacionController.listRebaja}" liveResize="true" var="_rebaja"
						rows="10" paginator="false" paginatorPosition="bottom" emptyMessage="No se encontro información." styleClass="dataTable">
						<p:columnGroup type="header">
							<!--  -->
							<p:row>
								<p:column rowspan="2" headerText="Comuna" />
								<p:column rowspan="2" headerText="Aporte Estatal {MAYO}" />
								<p:column colspan="3" headerText="Cumplimiento" />
								<p:column colspan="4" headerText="Rebaja Calculada" />
								<p:column colspan="4" headerText="Rebaja Final" />
								<p:column rowspan="2" headerText="Monto Rebaja {MAYO}" />
								<p:column rowspan="2" headerText="Nuevo Aporte Estatal {MAYO}" />
							</p:row>
							<p:row>
								<p:column headerText="item1" />
								<p:column headerText="item2" />
								<p:column headerText="item3" />

								<p:column headerText="reb1" />
								<p:column headerText="reb2" />
								<p:column headerText="reb3" />
								<p:column headerText="total" />

								<p:column headerText="reb ex1" />
								<p:column headerText="reb ex2" />
								<p:column headerText="reb ex3" />
								<p:column headerText="total" />
								
								
							</p:row>
						</p:columnGroup>
						<p:column><h:outputText value="#{_rebaja.comuna}"  styleClass="textoPequenio textoAjustado" /></p:column>
						<p:column>
							<h:outputText value="#{_rebaja.marco}" styleClass="textoPequenio textoAjustado">
								<f:convertNumber type="currency" maxFractionDigits="0" locale="es_CL" currencySymbol="$" />
							</h:outputText>
						</p:column>
						<p:column>
							<h:outputText value="#{_rebaja.itemCumplimiento1}" styleClass="textoPequenio textoAjustado">
								<f:convertNumber type="percent" />
							</h:outputText>
						</p:column>
						<p:column>
							<h:outputText value="#{_rebaja.itemCumplimiento2}" styleClass="textoPequenio textoAjustado">
								<f:convertNumber type="percent" />
							</h:outputText>
						</p:column>
						<p:column>
							<h:outputText value="#{_rebaja.itemCumplimiento3}" styleClass="textoPequenio textoAjustado">
								<f:convertNumber type="percent" />
							</h:outputText>
						</p:column>
						<p:column>
							<h:outputText value="#{_rebaja.rebaja1}" styleClass="textoPequenio textoAjustado">
								<f:convertNumber type="percent" />
							</h:outputText>
						</p:column>
						<p:column>
							<h:outputText value="#{_rebaja.rebaja2}" styleClass="textoPequenio textoAjustado">
								<f:convertNumber type="percent" />
							</h:outputText>
						</p:column>
						<p:column>
							<h:outputText value="#{_rebaja.rebaja3}" styleClass="textoPequenio textoAjustado">
								<f:convertNumber type="percent" />
							</h:outputText>
						</p:column>
						<p:column>
							<h:outputText value="#{_rebaja.totalRebaja}" styleClass="textoPequenio textoAjustado">
								<f:convertNumber type="percent" />
							</h:outputText>
						</p:column>

						<p:column>
							<h:outputText value="#{_rebaja.rebajaExcepcional1}" styleClass="textoPequenio textoAjustado">
								<f:convertNumber type="percent" />
							</h:outputText>
						</p:column>
						<p:column>
							<h:outputText value="#{_rebaja.rebajaExcepcional2}" styleClass="textoPequenio textoAjustado">
								<f:convertNumber type="percent" />
							</h:outputText>
						</p:column>
						<p:column>
							<h:outputText value="#{_rebaja.rebajaExcepcional3}" styleClass="textoPequenio textoAjustado">
								<f:convertNumber type="percent" />
							</h:outputText>
						</p:column>

						<p:column>
							<h:outputText value="#{_rebaja.totalRebajaExcepcional}" styleClass="textoPequenio textoAjustado">
								<f:convertNumber type="percent" />
							</h:outputText>
						</p:column>

						<p:column>
							<h:outputText value="#{_rebaja.marco*_rebaja.totalRebaja}" styleClass="textoPequenio textoAjustado">
								<f:convertNumber type="currency" maxFractionDigits="0" locale="es_CL" currencySymbol="$" />
							</h:outputText>
						</p:column>
						<p:column>
							<h:outputText value="#{_rebaja.marco-(_rebaja.marco*_rebaja.totalRebaja)}" styleClass="textoPequenio textoAjustado">
								<f:convertNumber type="currency" maxFractionDigits="0" locale="es_CL" currencySymbol="$" />
							</h:outputText>
						</p:column>

					</p:dataTable>
					<!-- FIN: MODAL CON INFORMACIóN Y FILTROS VISTA ONLINE -->
					<!-- HISTORIAL DE SEGUIMIENTO -->
					<h3>Bitácora de Seguimiento:</h3>
					<!-- INICIO MENSAJE MOCK -->
					<p:panelGrid columns="2">

						<h:outputText value="04/04/2014" styleClass="inputLabel" />

						<h:panelGrid styleClass="tableFullWidth">
							<h:panelGrid columns="2" styleClass="tableFullWidth">
								<h:outputText value="Para: " styleClass="inputLabel" />
								<h:outputText value="jarriaga@redhat.com" />

								<h:outputText value="CC: " styleClass="inputLabel" />
								<h:outputText value="rwattcha@redhat.com, pmura@redhat.com" />

								<h:outputText value="CCO: " styleClass="inputLabel" />
								<h:outputText value="marcela.minsal@gmail.com" />

								<h:outputText value="Adjunto: " styleClass="inputLabel" />
								<h:panelGrid columns="2">
									<h:graphicImage value="resources/minsal/images/download-alt.png" styleClass="divapIcons" />
									<p:commandLink value="archivos.zip" />
								</h:panelGrid>

								<h:outputText value="Asunto: " styleClass="inputLabel" />
								<h:outputText value="Envío archivos de #{procesoAsignacionPerCapitaController.actividadSeguimientoTitle}" />

								<h:outputText value="Mensaje: " styleClass="inputLabel" />
								<h:outputText
									value="Se valida que nulla eget ultricies. Morbi pulvinar elit
						at justo pharetra, vitae ultricies est faucibus. Integer id est
						euismod libero rutrum ultricies. Integer aliquet, sem id commodo. - Robson Watt" />
							</h:panelGrid>
						</h:panelGrid>
					</p:panelGrid>
					<!-- FIN MENSAJE MOCK -->

					<h:form>
						<h3>Enviar Correo:</h3>
						<h:panelGrid styleClass="tableFullWidth">
							<h:panelGrid columns="2" styleClass="tableFullWidth">
								<h:outputText value="Para: " styleClass="inputLabel" />
								<h:inputText styleClass="inputText" />

								<h:outputText value="CC: " styleClass="inputLabel" />
								<h:inputText styleClass="inputText" />

								<h:outputText value="CCO: " styleClass="inputLabel" />
								<h:inputText styleClass="inputText" />

								<h:outputText value="Adjunto: " styleClass="inputLabel" />
								<h:panelGrid columns="2">
									<p:fileUpload id="valorBasicoDesempenoFile" value="#{procesoAsignacionPerCapitaController.valorBasicoDesempenoFile}" mode="simple"
										styleClass="inputText" />
									<h:outputText value="* No se ha subido ningún archivo aún." styleClass="ui-state-error" />
								</h:panelGrid>

								<h:outputText value="Asunto: " styleClass="inputLabel" />
								<h:inputText styleClass="inputText" />

								<h:outputText value="Mensaje: " styleClass="inputLabel" />
								<h:inputTextarea styleClass="inputTextArea" />
							</h:panelGrid>
							<p:commandButton styleClass="x-btn-text" style="float:right;" value="Enviar Correo" icon="ui-icon-comment" />
						</h:panelGrid>
						<h3>Tareas de la Actividad:</h3>
						<p style="">
							En caso de que el seguimiento de la actividad sea exitoso haga clic en <span class="strong">Finalizar Seguimiento</span> para
							finalizar la actividad y pasar a la siguiente en el flujo del proceso. En caso de que exista algún error en la documentación y sea
							necesario volver a generar la documentación haga clic en <span class="strong">Reingresar</span>.
						</p>

						<p:commandButton styleClass="x-btn-text" value="Modificar Rebaja" icon="ui-icon-refresh"
							actionListener="#{procesoRebajaTramitacionController.recalcular}" action="bandejaTareas?faces-redirect=true indexMenu=0">
						<f:setPropertyActionListener target="#{procesoRebajaTramitacionController.target}"
							value="bandejaTareas.jsf" />
						</p:commandButton>

						<p:commandButton styleClass="x-btn-text" value="Finalizar Seguimiento" icon="ui-icon-check"
							actionListener="#{procesoRebajaTramitacionController.enviar}" action="bandejaTareas?faces-redirect=true indexMenu=0">
							<f:setPropertyActionListener target="#{procesoRebajaTramitacionController.target}"
							value="bandejaTareas.jsf" />
						</p:commandButton>

						<div style="clear: both;"></div>
					</h:form>

				</p:panel>
				<p:commandButton value="Volver" styleClass="x-btn-text" action="bandejaTareas?faces-redirect=true indexMenu=0" ajax="false"
					icon="ui-icon-seek-first" />
			</p:panel>
		</h:form>
	</ui:define>
</ui:composition>