<?xml version="1.0" encoding="UTF-8"?>
<ui:composition xmlns="http://www.w3.org/1999/xhtml" xmlns:ui="http://java.sun.com/jsf/facelets" xmlns:f="http://java.sun.com/jsf/core"
	xmlns:h="http://java.sun.com/jsf/html" xmlns:p="http://primefaces.org/ui" template="/WEB-INF/templates/default.xhtml">

	<ui:define name="content">
		<h:form enctype="multipart/form-data">
			<p:panel styleClass="contentPanel">
				<h1>
					<h:outputText value="DIVAP Reportes" />
				</h1>
				<p:panel id="Panel">
					<h2>Rebajas</h2>

					<div class="destacaArchivos ui-corner-all">
						<h3>Archivos Disponibles:</h3>
						<span class="strong">Archivo: </span> Planilla Reporte Rebajas [
						<h:graphicImage value="resources/minsal/images/download-alt.png" styleClass="divapIcons" />
						<h:commandLink
										action="#{reportesRebajaController.downloadTemplate}"
										value="Bajar">
										<f:setPropertyActionListener
											target="#{reportesRebajaController.docIdDownload}"
											value="#{reportesRebajaController.idPlanillaRebaja}" />
									</h:commandLink>
						]
					</div>
					<br />

					<p:dataTable resizableColumns="true" value="#{reportesRebajaController.reporteRebajaVO}" liveResize="true" var="_data"
						rows="#{reportesRebajaController.reporteRebajaVO.size}" paginator="false" paginatorPosition="bottom" emptyMessage="No se encontro información." styleClass="dataTable">

						<p:columnGroup type="header">
							<p:row>
								<p:column rowspan="3" headerText="Región" />
								<p:column rowspan="3" headerText="Servicio" />
								<p:column rowspan="3" headerText="Comuna" />
								<p:column colspan="8" headerText="Rebaja" />
								<p:column rowspan="3" headerText="Rebaja Total" />
							</p:row>
							<p:row>
								<p:column colspan="2" headerText="#{reportesRebajaController.mesCorte1}" />
								<p:column colspan="2" headerText="#{reportesRebajaController.mesCorte2}" />
								<p:column colspan="2" headerText="#{reportesRebajaController.mesCorte3}" />
								<p:column colspan="2" headerText="#{reportesRebajaController.mesCorte4}" />
							</p:row>
							<p:row>
								<p:column headerText="Monto" />
								<p:column headerText="%" />

								<p:column headerText="Monto" />
								<p:column headerText="%" />
								
								<p:column headerText="Monto" />
								<p:column headerText="%" />

								<p:column headerText="Monto" />
								<p:column headerText="%" />
							</p:row>
						</p:columnGroup>

						<p:column>
							<span class="textoAjustado textoPequenio centrado">#{_data.region}</span>
						</p:column>
						<p:column>
							<span class="textoAjustado textoPequenio centrado">#{_data.servicio}</span>
						</p:column>
						<p:column>
							<span class="textoAjustado textoPequenio centrado">#{_data.comuna}</span>
						</p:column>
						<p:column>
							<h:outputText value="#{_data.fCorte1Monto}" styleClass="textoPequenio textoAjustado">
								<f:convertNumber type="currency" maxFractionDigits="0" locale="es_CL" currencySymbol="$" />
							</h:outputText>
						</p:column>
						<p:column>
							<h:outputText value="#{_data.fCorte1Porcentaje}" styleClass="textoPequenio textoAjustado">
								<f:convertNumber type="percent" maxFractionDigits="0" locale="es_CL" currencySymbol="$" />
							</h:outputText>
						</p:column>
						
						<p:column>
							<h:outputText value="#{_data.fCorte2Monto}" styleClass="textoPequenio textoAjustado">
								<f:convertNumber type="currency" maxFractionDigits="0" locale="es_CL" currencySymbol="$" />
							</h:outputText>
						</p:column>
						<p:column>
							<h:outputText value="#{_data.fCorte2Porcentaje}" styleClass="textoPequenio textoAjustado">
								<f:convertNumber type="percent" maxFractionDigits="0" locale="es_CL" currencySymbol="$" />
							</h:outputText>
						</p:column>
						
						<p:column>
							<h:outputText value="#{_data.fCorte3Monto}" styleClass="textoPequenio textoAjustado">
								<f:convertNumber type="currency" maxFractionDigits="0" locale="es_CL" currencySymbol="$" />
							</h:outputText>
						</p:column>
						<p:column>
							<h:outputText value="#{_data.fCorte3Porcentaje}" styleClass="textoPequenio textoAjustado">
								<f:convertNumber type="percent" maxFractionDigits="0" locale="es_CL" currencySymbol="$" />
							</h:outputText>
						</p:column>
						
						<p:column>
							<h:outputText value="#{_data.fCorte4Monto}" styleClass="textoPequenio textoAjustado">
								<f:convertNumber type="currency" maxFractionDigits="0" locale="es_CL" currencySymbol="$" />
							</h:outputText>
						</p:column>
						<p:column>
							<h:outputText value="#{_data.fCorte4Porcentaje}" styleClass="textoPequenio textoAjustado">
								<f:convertNumber type="percent" maxFractionDigits="0" locale="es_CL" currencySymbol="$" />
							</h:outputText>
						</p:column>

						<p:column>
							<h:outputText value="#{_data.rebajaTotal}" styleClass="textoPequenio textoAjustado">
								<f:convertNumber type="currency" maxFractionDigits="0" locale="es_CL" currencySymbol="$" />
							</h:outputText>
						</p:column>


						<p:columnGroup type="footer">
							<p:row>
								<p:column />
								<p:column />
								<p:column />
								<p:column>
									<f:facet name="footer">
										<h:outputText value="#{reportesRebajaController.montoCorte1}" styleClass="textoAjustado textoPequenio centrado">
											<f:convertNumber type="currency" maxFractionDigits="0" locale="es_CL" currencySymbol="$" />
										</h:outputText>
									</f:facet>
								</p:column>
								<p:column />
								<p:column>
									<f:facet name="footer">
										<h:outputText value="#{reportesRebajaController.montoCorte2}" styleClass="textoAjustado textoPequenio centrado">
											<f:convertNumber type="currency" maxFractionDigits="0" locale="es_CL" currencySymbol="$" />
										</h:outputText>
									</f:facet>
								</p:column>
								<p:column />
								<p:column>
									<f:facet name="footer">
										<h:outputText value="#{reportesRebajaController.montoCorte3}" styleClass="textoAjustado textoPequenio centrado">
											<f:convertNumber type="currency" maxFractionDigits="0" locale="es_CL" currencySymbol="$" />
										</h:outputText>
									</f:facet>
								</p:column>
								<p:column />
								<p:column>
									<f:facet name="footer">
										<h:outputText value="#{reportesRebajaController.montoCorte4}" styleClass="textoAjustado textoPequenio centrado">
											<f:convertNumber type="currency" maxFractionDigits="0" locale="es_CL" currencySymbol="$" />
										</h:outputText>
									</f:facet>
								</p:column>
								<p:column />
								
								<p:column>
									<f:facet name="footer">
										<h:outputText value="#{reportesRebajaController.montoRebajaTotal}" styleClass="textoAjustado textoPequenio centrado">
											<f:convertNumber type="currency" maxFractionDigits="0" locale="es_CL" currencySymbol="$" />
										</h:outputText>
									</f:facet>
								</p:column>
							</p:row>
						</p:columnGroup>

					</p:dataTable>

				</p:panel>

				<p:commandButton value="Volver" styleClass="x-btn-text" action="bandejaTareas?faces-redirect=true indexMenu=0" ajax="false"
					icon="ui-icon-seek-first" />
			</p:panel>
		</h:form>
	</ui:define>
</ui:composition>